; generated by Component: ARM Compiler 5.06 update 3 (build 300) Tool: ArmCC [4d35f0]
; commandline ArmCC [--list --split_sections --debug -c --asm --interleave -o.\objects\bsp_tft_lcd.o --asm_dir=.\Listings\ --list_dir=.\Listings\ --depend=.\objects\bsp_tft_lcd.d --cpu=Cortex-M3 --apcs=interwork -O0 --diag_suppress=9931 -I..\Libraries\CMSIS\Include -I..\Libraries\CMSIS\RTOS\Template -I..\Libraries\STM32F2xx_StdPeriph_Driver\inc -I..\Libraries\CMSIS\Device\ST\STM32F2xx\Include -I..\FatFS\src -I..\FreeRTOS\include -I..\FreeRTOS\portable\RVDS\ARM_CM3 -I..\User -I..\User\bsp -I..\User\emWinTask -I..\STemWin\Config -I..\STemWin\DisplayDriver -I..\STemWin\inc -I..\STemWin\OS -IH:\BluetoothSoundBox\Project_BtSB\SZ_VIPIN_BTSB_Project\Project\RTE -IC:\Keil_v521a\ARM\PACK\Keil\STM32F2xx_DFP\2.6.0\Drivers\CMSIS\Device\ST\STM32F2xx\Include -IC:\Keil_v521a\ARM\CMSIS\Include -D__UVISION_VERSION=521 -DSTM32F205xx -DUSE_STDPERIPH_DRIVER --omf_browse=.\objects\bsp_tft_lcd.crf ..\User\bsp\bsp_tft_lcd.c]
                          THUMB

                          AREA ||i.LCD_Blend565||, CODE, READONLY, ALIGN=2

                  LCD_Blend565 PROC
;;;1059   */
;;;1060   uint16_t LCD_Blend565(uint16_t src, uint16_t dst, uint8_t alpha)
000000  b570              PUSH     {r4-r6,lr}
;;;1061   {
000002  4603              MOV      r3,r0
;;;1062   	uint32_t src2;
;;;1063   	uint32_t dst2;
;;;1064   
;;;1065   	src2 = ((src << 16) |src) & 0x07E0F81F;
000004  ea434003          ORR      r0,r3,r3,LSL #16
000008  4e08              LDR      r6,|L1.44|
00000a  ea000406          AND      r4,r0,r6
;;;1066   	dst2 = ((dst << 16) | dst) & 0x07E0F81F;
00000e  ea414001          ORR      r0,r1,r1,LSL #16
000012  ea000506          AND      r5,r0,r6
;;;1067   	dst2 = ((((dst2 - src2) * alpha) >> 5) + src2) & 0x07E0F81F;
000016  1b28              SUBS     r0,r5,r4
000018  4350              MULS     r0,r2,r0
00001a  eb041050          ADD      r0,r4,r0,LSR #5
00001e  ea000506          AND      r5,r0,r6
;;;1068   	return (dst2 >> 16) | dst2;
000022  ea454015          ORR      r0,r5,r5,LSR #16
000026  b280              UXTH     r0,r0
;;;1069   }
000028  bd70              POP      {r4-r6,pc}
;;;1070   
                          ENDP

00002a  0000              DCW      0x0000
                  |L1.44|
                          DCD      0x07e0f81f

                          AREA ||i.LCD_ButtonTouchDown||, CODE, READONLY, ALIGN=1

                  LCD_ButtonTouchDown PROC
;;;1771   */
;;;1772   uint8_t LCD_ButtonTouchDown(BUTTON_T *_btn, uint16_t _usX, uint16_t _usY)
000000  b570              PUSH     {r4-r6,lr}
;;;1773   {
000002  4604              MOV      r4,r0
000004  460d              MOV      r5,r1
000006  4616              MOV      r6,r2
;;;1774   	if ((_usX > _btn->Left) && (_usX < _btn->Left + _btn->Width)
000008  8860              LDRH     r0,[r4,#2]
00000a  42a8              CMP      r0,r5
00000c  da13              BGE      |L2.54|
00000e  8860              LDRH     r0,[r4,#2]
000010  8921              LDRH     r1,[r4,#8]
000012  4408              ADD      r0,r0,r1
000014  42a8              CMP      r0,r5
000016  dd0e              BLE      |L2.54|
;;;1775   		&& (_usY > _btn->Top) && (_usY < _btn->Top + _btn->Height))
000018  88a0              LDRH     r0,[r4,#4]
00001a  42b0              CMP      r0,r6
00001c  da0b              BGE      |L2.54|
00001e  88a0              LDRH     r0,[r4,#4]
000020  88e1              LDRH     r1,[r4,#6]
000022  4408              ADD      r0,r0,r1
000024  42b0              CMP      r0,r6
000026  dd06              BLE      |L2.54|
;;;1776   	{
;;;1777   		BUTTON_BEEP();	/* 按键提示音 bsp_tft_lcd.h 文件开头可以使能和关闭 */
;;;1778   		_btn->Focus = 1;
000028  2001              MOVS     r0,#1
00002a  7520              STRB     r0,[r4,#0x14]
;;;1779   		LCD_DrawButton(_btn);
00002c  4620              MOV      r0,r4
00002e  f7fffffe          BL       LCD_DrawButton
;;;1780   		return 1;
000032  2001              MOVS     r0,#1
                  |L2.52|
;;;1781   	}
;;;1782   	else
;;;1783   	{
;;;1784   		return 0;
;;;1785   	}
;;;1786   }
000034  bd70              POP      {r4-r6,pc}
                  |L2.54|
000036  2000              MOVS     r0,#0                 ;1784
000038  e7fc              B        |L2.52|
;;;1787   
                          ENDP


                          AREA ||i.LCD_ButtonTouchRelease||, CODE, READONLY, ALIGN=1

                  LCD_ButtonTouchRelease PROC
;;;1796   */
;;;1797   uint8_t LCD_ButtonTouchRelease(BUTTON_T *_btn, uint16_t _usX, uint16_t _usY)
000000  b570              PUSH     {r4-r6,lr}
;;;1798   {
000002  4604              MOV      r4,r0
000004  460d              MOV      r5,r1
000006  4616              MOV      r6,r2
;;;1799   	_btn->Focus = 0;
000008  2000              MOVS     r0,#0
00000a  7520              STRB     r0,[r4,#0x14]
;;;1800   	LCD_DrawButton(_btn);
00000c  4620              MOV      r0,r4
00000e  f7fffffe          BL       LCD_DrawButton
;;;1801   
;;;1802   	if ((_usX > _btn->Left) && (_usX < _btn->Left + _btn->Width)
000012  8860              LDRH     r0,[r4,#2]
000014  42a8              CMP      r0,r5
000016  da0e              BGE      |L3.54|
000018  8860              LDRH     r0,[r4,#2]
00001a  8921              LDRH     r1,[r4,#8]
00001c  4408              ADD      r0,r0,r1
00001e  42a8              CMP      r0,r5
000020  dd09              BLE      |L3.54|
;;;1803   		&& (_usY > _btn->Top) && (_usY < _btn->Top + _btn->Height))
000022  88a0              LDRH     r0,[r4,#4]
000024  42b0              CMP      r0,r6
000026  da06              BGE      |L3.54|
000028  88a0              LDRH     r0,[r4,#4]
00002a  88e1              LDRH     r1,[r4,#6]
00002c  4408              ADD      r0,r0,r1
00002e  42b0              CMP      r0,r6
000030  dd01              BLE      |L3.54|
;;;1804   	{
;;;1805   		return 1;
000032  2001              MOVS     r0,#1
                  |L3.52|
;;;1806   	}
;;;1807   	else
;;;1808   	{
;;;1809   		return 0;
;;;1810   	}
;;;1811   }
000034  bd70              POP      {r4-r6,pc}
                  |L3.54|
000036  2000              MOVS     r0,#0                 ;1809
000038  e7fc              B        |L3.52|
;;;1812   
                          ENDP


                          AREA ||i.LCD_ClrScr||, CODE, READONLY, ALIGN=1

                  LCD_ClrScr PROC
;;;230    */
;;;231    void LCD_ClrScr(uint16_t _usColor)
000000  b510              PUSH     {r4,lr}
;;;232    {
000002  4604              MOV      r4,r0
;;;233        ST7789V_ClrScr(_usColor);
000004  4620              MOV      r0,r4
000006  f7fffffe          BL       ST7789V_ClrScr
;;;234    }
00000a  bd10              POP      {r4,pc}
;;;235    
                          ENDP


                          AREA ||i.LCD_CtrlLinesConfig||, CODE, READONLY, ALIGN=2

                  LCD_CtrlLinesConfig PROC
;;;1614   */
;;;1615   static void LCD_CtrlLinesConfig(void)
000000  b51c              PUSH     {r2-r4,lr}
;;;1616   {
;;;1617   	GPIO_InitTypeDef GPIO_InitStructure;
;;;1618   
;;;1619   	/* 使能 GPIOD */
;;;1620   	RCC_AHB1PeriphClockCmd(RCC_AHB1Periph_GPIOB | RCC_AHB1Periph_GPIOC, ENABLE);
000002  2101              MOVS     r1,#1
000004  2006              MOVS     r0,#6
000006  f7fffffe          BL       RCC_AHB1PeriphClockCmd
;;;1621   
;;;1622   	/*  GPIO 配置为复用推挽输出 */
;;;1623   	GPIO_InitStructure.GPIO_Speed = GPIO_Speed_100MHz;
00000a  2003              MOVS     r0,#3
00000c  f88d0005          STRB     r0,[sp,#5]
;;;1624   	GPIO_InitStructure.GPIO_Mode = GPIO_Mode_OUT;
000010  2001              MOVS     r0,#1
000012  f88d0004          STRB     r0,[sp,#4]
;;;1625   	GPIO_InitStructure.GPIO_OType = GPIO_OType_PP; 
000016  2000              MOVS     r0,#0
000018  f88d0006          STRB     r0,[sp,#6]
;;;1626   	GPIO_InitStructure.GPIO_PuPd = GPIO_PuPd_UP;
00001c  2001              MOVS     r0,#1
00001e  f88d0007          STRB     r0,[sp,#7]
;;;1627   
;;;1628   	/* LCD Data Bus */
;;;1629   	GPIO_InitStructure.GPIO_Pin = GPIO_Pin_All;
000022  f64f70ff          MOV      r0,#0xffff
000026  9000              STR      r0,[sp,#0]
;;;1630   	GPIO_Init(GPIOB, &GPIO_InitStructure);
000028  4669              MOV      r1,sp
00002a  4810              LDR      r0,|L5.108|
00002c  f7fffffe          BL       GPIO_Init
;;;1631           GPIO_Write(GPIOB, 0XFF); //默认输出高电平
000030  21ff              MOVS     r1,#0xff
000032  480e              LDR      r0,|L5.108|
000034  f7fffffe          BL       GPIO_Write
;;;1632   
;;;1633           /* LCD CMD Bus */
;;;1634   	GPIO_InitStructure.GPIO_Pin = GPIO_Pin_6          /* RD */
000038  f44f7070          MOV      r0,#0x3c0
00003c  9000              STR      r0,[sp,#0]
;;;1635   		                        | GPIO_Pin_7          /* WD */ 
;;;1636   		                        | GPIO_Pin_8          /* RS */
;;;1637   		                        | GPIO_Pin_9;         /* CS */
;;;1638   	GPIO_Init(GPIOC, &GPIO_InitStructure);
00003e  4669              MOV      r1,sp
000040  480b              LDR      r0,|L5.112|
000042  f7fffffe          BL       GPIO_Init
;;;1639           GPIO_SetBits(GPIOC, GPIO_Pin_6);
000046  2140              MOVS     r1,#0x40
000048  4809              LDR      r0,|L5.112|
00004a  f7fffffe          BL       GPIO_SetBits
;;;1640           GPIO_SetBits(GPIOC, GPIO_Pin_7);
00004e  2180              MOVS     r1,#0x80
000050  4807              LDR      r0,|L5.112|
000052  f7fffffe          BL       GPIO_SetBits
;;;1641           GPIO_SetBits(GPIOC, GPIO_Pin_8);
000056  f44f7180          MOV      r1,#0x100
00005a  4805              LDR      r0,|L5.112|
00005c  f7fffffe          BL       GPIO_SetBits
;;;1642           GPIO_SetBits(GPIOC, GPIO_Pin_9);
000060  f44f7100          MOV      r1,#0x200
000064  4802              LDR      r0,|L5.112|
000066  f7fffffe          BL       GPIO_SetBits
;;;1643   }
00006a  bd1c              POP      {r2-r4,pc}
;;;1644   
                          ENDP

                  |L5.108|
                          DCD      0x40020400
                  |L5.112|
                          DCD      0x40020800

                          AREA ||i.LCD_DispControl||, CODE, READONLY, ALIGN=1

                  LCD_DispControl PROC
;;;1568   */
;;;1569   void LCD_DispControl(void *_pControl)
000000  b570              PUSH     {r4-r6,lr}
;;;1570   {
000002  4604              MOV      r4,r0
;;;1571   	uint8_t id;
;;;1572   
;;;1573   	id = *(uint8_t *)_pControl;	/* 读取ID */
000004  7825              LDRB     r5,[r4,#0]
;;;1574   
;;;1575   	switch (id)
000006  2d08              CMP      r5,#8
000008  d21e              BCS      |L6.72|
00000a  e8dff005          TBB      [pc,r5]
00000e  1d04              DCB      0x1d,0x04
000010  05090d11          DCB      0x05,0x09,0x0d,0x11
000014  1519              DCB      0x15,0x19
;;;1576   	{
;;;1577   		case ID_ICON:
;;;1578   			//void LCD_DrawIcon(const ICON_T *_tIcon, FONT_T *_tFont, uint8_t _ucFocusMode);
;;;1579   			break;
000016  e017              B        |L6.72|
;;;1580   
;;;1581   		case ID_WIN:
;;;1582   			LCD_DrawWin((WIN_T *)_pControl);
000018  4620              MOV      r0,r4
00001a  f7fffffe          BL       LCD_DrawWin
;;;1583   			break;
00001e  e013              B        |L6.72|
;;;1584   
;;;1585   		case ID_LABEL:
;;;1586   			LCD_DrawLabel((LABEL_T *)_pControl);
000020  4620              MOV      r0,r4
000022  f7fffffe          BL       LCD_DrawLabel
;;;1587   			break;
000026  e00f              B        |L6.72|
;;;1588   
;;;1589   		case ID_BUTTON:
;;;1590   			LCD_DrawButton((BUTTON_T *)_pControl);
000028  4620              MOV      r0,r4
00002a  f7fffffe          BL       LCD_DrawButton
;;;1591   			break;
00002e  e00b              B        |L6.72|
;;;1592   
;;;1593   		case ID_CHECK:
;;;1594   			LCD_DrawCheckBox((CHECK_T *)_pControl);
000030  4620              MOV      r0,r4
000032  f7fffffe          BL       LCD_DrawCheckBox
;;;1595   			break;
000036  e007              B        |L6.72|
;;;1596   
;;;1597   		case ID_EDIT:
;;;1598   			LCD_DrawEdit((EDIT_T *)_pControl);
000038  4620              MOV      r0,r4
00003a  f7fffffe          BL       LCD_DrawEdit
;;;1599   			break;
00003e  e003              B        |L6.72|
;;;1600   
;;;1601   		case ID_GROUP:
;;;1602   			LCD_DrawGroupBox((GROUP_T *)_pControl);
000040  4620              MOV      r0,r4
000042  f7fffffe          BL       LCD_DrawGroupBox
;;;1603   			break;
000046  bf00              NOP      
                  |L6.72|
000048  bf00              NOP                            ;1579
;;;1604   	}
;;;1605   }
00004a  bd70              POP      {r4-r6,pc}
;;;1606   
                          ENDP


                          AREA ||i.LCD_DispOff||, CODE, READONLY, ALIGN=1

                  LCD_DispOff PROC
;;;217    */
;;;218    void LCD_DispOff(void)
000000  b510              PUSH     {r4,lr}
;;;219    {
;;;220    	ST7789V_DispOff();
000002  f7fffffe          BL       ST7789V_DispOff
;;;221    }
000006  bd10              POP      {r4,pc}
;;;222    
                          ENDP


                          AREA ||i.LCD_DispOn||, CODE, READONLY, ALIGN=1

                  LCD_DispOn PROC
;;;204    */
;;;205    void LCD_DispOn(void)
000000  b510              PUSH     {r4,lr}
;;;206    {
;;;207    	ST7789V_DispOn();
000002  f7fffffe          BL       ST7789V_DispOn
;;;208    }
000006  bd10              POP      {r4,pc}
;;;209    
                          ENDP


                          AREA ||i.LCD_DispStr||, CODE, READONLY, ALIGN=1

                  LCD_DispStr PROC
;;;247    */
;;;248    void LCD_DispStr(uint16_t _usX, uint16_t _usY, char *_ptr, FONT_T *_tFont)
000000  e92d41fc          PUSH     {r2-r8,lr}
;;;249    {
000004  4604              MOV      r4,r0
000006  460d              MOV      r5,r1
000008  4616              MOV      r6,r2
00000a  461f              MOV      r7,r3
;;;250    	LCD_DispStrEx(_usX, _usY, _ptr, _tFont, 0, 0);
00000c  2000              MOVS     r0,#0
00000e  9000              STR      r0,[sp,#0]
000010  463b              MOV      r3,r7
000012  4632              MOV      r2,r6
000014  4629              MOV      r1,r5
000016  9001              STR      r0,[sp,#4]
000018  4620              MOV      r0,r4
00001a  f7fffffe          BL       LCD_DispStrEx
;;;251    }
00001e  e8bd81fc          POP      {r2-r8,pc}
;;;252    
                          ENDP


                          AREA ||i.LCD_DispStrEx||, CODE, READONLY, ALIGN=1

                  LCD_DispStrEx PROC
;;;573    */
;;;574    void LCD_DispStrEx(uint16_t _usX, uint16_t _usY, char *_ptr, FONT_T *_tFont, uint16_t _Width,
000000  e92d4fff          PUSH     {r0-r11,lr}
;;;575    	uint8_t _Align)
;;;576    {
000004  b0ab              SUB      sp,sp,#0xac
000006  4607              MOV      r7,r0
000008  4616              MOV      r6,r2
00000a  461c              MOV      r4,r3
00000c  f8dd80e0          LDR      r8,[sp,#0xe0]
;;;577    	uint32_t i;
;;;578    	uint8_t code1;
;;;579    	uint8_t code2;
;;;580    	uint8_t buf[32 * 32 / 8];	/* 最大支持24点阵汉字 */
;;;581    	uint8_t width;
;;;582    	uint16_t m;
;;;583    	uint8_t font_width = 0;
000010  f04f0b00          MOV      r11,#0
;;;584    	uint8_t font_height = 0;
000014  2000              MOVS     r0,#0
000016  9006              STR      r0,[sp,#0x18]
;;;585    	uint16_t x, y;
;;;586    	uint16_t offset;
;;;587    	uint16_t str_width;	/* 字符串实际宽度  */
;;;588    	uint8_t ra8875_use = 0;
000018  9003              STR      r0,[sp,#0xc]
;;;589    	//uint8_t ra8875_font_code = 0;
;;;590    
;;;591    	switch (_tFont->FontCode)
00001a  7820              LDRB     r0,[r4,#0]
00001c  2807              CMP      r0,#7
00001e  d21e              BCS      |L10.94|
000020  e8dff000          TBB      [pc,r0]
000024  04080c10          DCB      0x04,0x08,0x0c,0x10
000028  14171a00          DCB      0x14,0x17,0x1a,0x00
;;;592    	{
;;;593    		case FC_ST_12:		/* 12点阵 */
;;;594    			font_height = 12;
00002c  200c              MOVS     r0,#0xc
00002e  9006              STR      r0,[sp,#0x18]
;;;595    			font_width = 12;
000030  4683              MOV      r11,r0
;;;596    			break;
000032  e017              B        |L10.100|
;;;597    		
;;;598    		case FC_ST_16:
;;;599    			font_height = 16;
000034  2010              MOVS     r0,#0x10
000036  9006              STR      r0,[sp,#0x18]
;;;600    			font_width = 16;
000038  4683              MOV      r11,r0
;;;601    			break;
00003a  e013              B        |L10.100|
;;;602    
;;;603    		case FC_ST_24:
;;;604    			font_height = 24;
00003c  2018              MOVS     r0,#0x18
00003e  9006              STR      r0,[sp,#0x18]
;;;605    			font_width = 24;
000040  4683              MOV      r11,r0
;;;606    			break;
000042  e00f              B        |L10.100|
;;;607    						
;;;608    		case FC_ST_32:	
;;;609    			font_height = 32;
000044  2020              MOVS     r0,#0x20
000046  9006              STR      r0,[sp,#0x18]
;;;610    			font_width = 32;
000048  4683              MOV      r11,r0
;;;611    			break;					
00004a  e00b              B        |L10.100|
;;;612    		
;;;613    		case FC_RA8875_16:
;;;614    			//ra8875_font_code = RA_FONT_16;
;;;615    			ra8875_use = 1;	/* 表示用RA8875字库 */
00004c  2001              MOVS     r0,#1
00004e  9003              STR      r0,[sp,#0xc]
;;;616    			break;
000050  e008              B        |L10.100|
;;;617    			
;;;618    		case FC_RA8875_24:
;;;619    			//ra8875_font_code = RA_FONT_24;
;;;620    			ra8875_use = 1;	/* 表示用RA8875字库 */
000052  2001              MOVS     r0,#1
000054  9003              STR      r0,[sp,#0xc]
;;;621    			break;
000056  e005              B        |L10.100|
;;;622    						
;;;623    		case FC_RA8875_32:
;;;624    			//ra8875_font_code = RA_FONT_32;
;;;625    			ra8875_use = 1;	/* 表示用RA8875字库 */
000058  2001              MOVS     r0,#1
00005a  9003              STR      r0,[sp,#0xc]
;;;626    			break;
00005c  e002              B        |L10.100|
                  |L10.94|
;;;627    		
;;;628    		default:
;;;629    			return;
;;;630    	}
;;;631    	
;;;632    	str_width = LCD_GetStrWidth(_ptr, _tFont);	/* 计算字符串实际宽度(RA8875内部ASCII点阵宽度为变长 */
;;;633    	offset = 0;
;;;634    	if (_Width > str_width)
;;;635    	{
;;;636    		if (_Align == ALIGN_RIGHT)	/* 右对齐 */
;;;637    		{
;;;638    			offset = _Width - str_width;
;;;639    		}
;;;640    		else if (_Align == ALIGN_CENTER)	/* 左对齐 */
;;;641    		{
;;;642    			offset = (_Width - str_width) / 2;
;;;643    		}
;;;644    		else	/* 左对齐 ALIGN_LEFT */
;;;645    		{
;;;646    			;
;;;647    		}
;;;648    	}
;;;649    
;;;650    	/* 左侧填背景色, 中间对齐和右边对齐  */
;;;651    	if (offset > 0)
;;;652    	{
;;;653    		LCD_Fill_Rect(_usX, _usY, LCD_GetFontHeight(_tFont), offset,  _tFont->BackColor);
;;;654    		_usX += offset;
;;;655    	}
;;;656    	
;;;657    	/* 右侧填背景色 */
;;;658    	if (_Width > str_width)
;;;659    	{
;;;660    		LCD_Fill_Rect(_usX + str_width, _usY, LCD_GetFontHeight(_tFont), _Width - str_width - offset,  _tFont->BackColor);
;;;661    	}
;;;662    	
;;;663    	if (ra8875_use == 1)	/* 使用RA8875外挂的字库芯片 */
;;;664    	{
;;;665    		//RA8875_SetFrontColor(_tFont->FrontColor);			/* 设置字体前景色 */
;;;666    		//RA8875_SetBackColor(_tFont->BackColor);				/* 设置字体背景色 */
;;;667    		//RA8875_SetFont(ra8875_font_code, 0, _tFont->Space);	/* 字体代码，行间距，字间距 */
;;;668    		//RA8875_DispStr(_usX, _usY, _ptr);
;;;669    	}
;;;670    	else	/* 使用CPU内部字库. 点阵信息由CPU读取 */
;;;671    	{
;;;672    		/* 开始循环处理字符 */
;;;673    		while (*_ptr != 0)
;;;674    		{
;;;675    			code1 = *_ptr;	/* 读取字符串数据， 该数据可能是ascii代码，也可能汉字代码的高字节 */
;;;676    			if (code1 < 0x80)
;;;677    			{
;;;678    				/* 将ascii字符点阵复制到buf */
;;;679    				//memcpy(buf, &pAscDot[code1 * (font_bytes / 2)], (font_bytes / 2));
;;;680    				_LCD_ReadAsciiDot(code1, _tFont->FontCode, buf);	/* 读取ASCII字符点阵 */
;;;681    				width = font_width / 2;
;;;682    			}
;;;683    			else
;;;684    			{
;;;685    				code2 = *++_ptr;
;;;686    				if (code2 == 0)
;;;687    				{
;;;688    					break;
;;;689    				}
;;;690    				/* 读1个汉字的点阵 */
;;;691    				_LCD_ReadHZDot(code1, code2, _tFont->FontCode, buf);
;;;692    				width = font_width;
;;;693    			}
;;;694    	
;;;695    			y = _usY;
;;;696    			/* 开始刷LCD */
;;;697    			for (m = 0; m < font_height; m++)	/* 字符高度 */
;;;698    			{
;;;699    				x = _usX;
;;;700    				for (i = 0; i < width; i++)	/* 字符宽度 */
;;;701    				{
;;;702    					if ((buf[m * ((2 * width) / font_width) + i / 8] & (0x80 >> (i % 8 ))) != 0x00)
;;;703    					{
;;;704    						LCD_PutPixel(x, y, _tFont->FrontColor);	/* 设置像素颜色为文字色 */
;;;705    					}
;;;706    					else
;;;707    					{
;;;708    						if (_tFont->BackColor != CL_MASK)	/* 透明色 */
;;;709    						{
;;;710    							LCD_PutPixel(x, y, _tFont->BackColor);	/* 设置像素颜色为文字背景色 */
;;;711    						}
;;;712    					}
;;;713    	
;;;714    					x++;
;;;715    				}
;;;716    				y++;
;;;717    			}
;;;718    	
;;;719    			if (_tFont->Space > 0)
;;;720    			{
;;;721    				/* 如果文字底色按_tFont->usBackColor，并且字间距大于点阵的宽度，那么需要在文字之间填充(暂时未实现) */
;;;722    			}
;;;723    			_usX += width + _tFont->Space;	/* 列地址递增 */
;;;724    			_ptr++;			/* 指向下一个字符 */
;;;725    		}
;;;726    	}
;;;727    }
00005e  b02f              ADD      sp,sp,#0xbc
000060  e8bd8ff0          POP      {r4-r11,pc}
                  |L10.100|
000064  bf00              NOP                            ;596
000066  4621              MOV      r1,r4                 ;632
000068  4630              MOV      r0,r6                 ;632
00006a  f7fffffe          BL       LCD_GetStrWidth
00006e  4605              MOV      r5,r0                 ;632
000070  f04f0900          MOV      r9,#0                 ;633
000074  45a8              CMP      r8,r5                 ;634
000076  dd10              BLE      |L10.154|
000078  9839              LDR      r0,[sp,#0xe4]         ;636
00007a  2802              CMP      r0,#2                 ;636
00007c  d104              BNE      |L10.136|
00007e  eba80005          SUB      r0,r8,r5              ;638
000082  fa1ff980          UXTH     r9,r0                 ;638
000086  e008              B        |L10.154|
                  |L10.136|
000088  9839              LDR      r0,[sp,#0xe4]         ;640
00008a  2801              CMP      r0,#1                 ;640
00008c  d105              BNE      |L10.154|
00008e  eba80005          SUB      r0,r8,r5              ;642
000092  eb0071d0          ADD      r1,r0,r0,LSR #31      ;642
000096  f3c1094f          UBFX     r9,r1,#1,#16          ;642
                  |L10.154|
00009a  f1b90f00          CMP      r9,#0                 ;651
00009e  dd0e              BLE      |L10.190|
0000a0  4620              MOV      r0,r4                 ;653
0000a2  f7fffffe          BL       LCD_GetFontHeight
0000a6  9002              STR      r0,[sp,#8]            ;653
0000a8  88a0              LDRH     r0,[r4,#4]            ;653
0000aa  464b              MOV      r3,r9                 ;653
0000ac  9000              STR      r0,[sp,#0]            ;653
0000ae  4638              MOV      r0,r7                 ;653
0000b0  9a02              LDR      r2,[sp,#8]            ;653
0000b2  992c              LDR      r1,[sp,#0xb0]         ;653
0000b4  f7fffffe          BL       LCD_Fill_Rect
0000b8  eb070009          ADD      r0,r7,r9              ;654
0000bc  b287              UXTH     r7,r0                 ;654
                  |L10.190|
0000be  45a8              CMP      r8,r5                 ;658
0000c0  dd10              BLE      |L10.228|
0000c2  4620              MOV      r0,r4                 ;660
0000c4  f7fffffe          BL       LCD_GetFontHeight
0000c8  9002              STR      r0,[sp,#8]            ;660
0000ca  88a0              LDRH     r0,[r4,#4]            ;660
0000cc  eba80105          SUB      r1,r8,r5              ;660
0000d0  eba10109          SUB      r1,r1,r9              ;660
0000d4  b28b              UXTH     r3,r1                 ;660
0000d6  1979              ADDS     r1,r7,r5              ;660
0000d8  9000              STR      r0,[sp,#0]            ;660
0000da  b288              UXTH     r0,r1                 ;660
0000dc  9a02              LDR      r2,[sp,#8]            ;660
0000de  992c              LDR      r1,[sp,#0xb0]         ;660
0000e0  f7fffffe          BL       LCD_Fill_Rect
                  |L10.228|
0000e4  9803              LDR      r0,[sp,#0xc]          ;663
0000e6  2801              CMP      r0,#1                 ;663
0000e8  d068              BEQ      |L10.444|
0000ea  e063              B        |L10.436|
                  |L10.236|
0000ec  7830              LDRB     r0,[r6,#0]            ;675
0000ee  902a              STR      r0,[sp,#0xa8]         ;675
0000f0  982a              LDR      r0,[sp,#0xa8]         ;676
0000f2  2880              CMP      r0,#0x80              ;676
0000f4  da0b              BGE      |L10.270|
0000f6  7821              LDRB     r1,[r4,#0]            ;680
0000f8  aa09              ADD      r2,sp,#0x24           ;680
0000fa  982a              LDR      r0,[sp,#0xa8]         ;680
0000fc  f7fffffe          BL       _LCD_ReadAsciiDot
000100  4658              MOV      r0,r11                ;681
000102  eb0b71d0          ADD      r1,r11,r0,LSR #31     ;681
000106  f3c10147          UBFX     r1,r1,#1,#8           ;681
00010a  9108              STR      r1,[sp,#0x20]         ;681
00010c  e00e              B        |L10.300|
                  |L10.270|
00010e  1c70              ADDS     r0,r6,#1              ;685
000110  4606              MOV      r6,r0                 ;685
000112  7800              LDRB     r0,[r0,#0]            ;685
000114  9029              STR      r0,[sp,#0xa4]         ;685
000116  9829              LDR      r0,[sp,#0xa4]         ;686
000118  b900              CBNZ     r0,|L10.284|
00011a  e04e              B        |L10.442|
                  |L10.284|
00011c  7822              LDRB     r2,[r4,#0]            ;691
00011e  ab09              ADD      r3,sp,#0x24           ;691
000120  e9dd1029          LDRD     r1,r0,[sp,#0xa4]      ;691
000124  f7fffffe          BL       _LCD_ReadHZDot
000128  f8cdb020          STR      r11,[sp,#0x20]        ;692
                  |L10.300|
00012c  982c              LDR      r0,[sp,#0xb0]         ;695
00012e  9004              STR      r0,[sp,#0x10]         ;695
000130  2000              MOVS     r0,#0                 ;697
000132  9007              STR      r0,[sp,#0x1c]         ;697
000134  e034              B        |L10.416|
                  |L10.310|
000136  9705              STR      r7,[sp,#0x14]         ;699
000138  f04f0a00          MOV      r10,#0                ;700
00013c  e025              B        |L10.394|
                  |L10.318|
00013e  9808              LDR      r0,[sp,#0x20]         ;702
000140  0040              LSLS     r0,r0,#1              ;702
000142  fb90f0fb          SDIV     r0,r0,r11             ;702
000146  9907              LDR      r1,[sp,#0x1c]         ;702
000148  4348              MULS     r0,r1,r0              ;702
00014a  eb0000da          ADD      r0,r0,r10,LSR #3      ;702
00014e  a909              ADD      r1,sp,#0x24           ;702
000150  5c08              LDRB     r0,[r1,r0]            ;702
000152  f00a0207          AND      r2,r10,#7             ;702
000156  2180              MOVS     r1,#0x80              ;702
000158  4111              ASRS     r1,r1,r2              ;702
00015a  4008              ANDS     r0,r0,r1              ;702
00015c  b128              CBZ      r0,|L10.362|
00015e  8862              LDRH     r2,[r4,#2]            ;704
000160  e9dd1004          LDRD     r1,r0,[sp,#0x10]      ;704
000164  f7fffffe          BL       LCD_PutPixel
000168  e009              B        |L10.382|
                  |L10.362|
00016a  88a0              LDRH     r0,[r4,#4]            ;708
00016c  f6491199          MOV      r1,#0x9999            ;708
000170  4288              CMP      r0,r1                 ;708
000172  d004              BEQ      |L10.382|
000174  88a2              LDRH     r2,[r4,#4]            ;710
000176  e9dd1004          LDRD     r1,r0,[sp,#0x10]      ;710
00017a  f7fffffe          BL       LCD_PutPixel
                  |L10.382|
00017e  9805              LDR      r0,[sp,#0x14]         ;714
000180  1c40              ADDS     r0,r0,#1              ;714
000182  b280              UXTH     r0,r0                 ;714
000184  9005              STR      r0,[sp,#0x14]         ;714
000186  f10a0a01          ADD      r10,r10,#1            ;700
                  |L10.394|
00018a  9808              LDR      r0,[sp,#0x20]         ;700
00018c  4582              CMP      r10,r0                ;700
00018e  d3d6              BCC      |L10.318|
000190  9804              LDR      r0,[sp,#0x10]         ;716
000192  1c40              ADDS     r0,r0,#1              ;716
000194  b280              UXTH     r0,r0                 ;716
000196  9004              STR      r0,[sp,#0x10]         ;716
000198  9807              LDR      r0,[sp,#0x1c]         ;697
00019a  1c40              ADDS     r0,r0,#1              ;697
00019c  b280              UXTH     r0,r0                 ;697
00019e  9007              STR      r0,[sp,#0x1c]         ;697
                  |L10.416|
0001a0  e9dd1006          LDRD     r1,r0,[sp,#0x18]      ;697
0001a4  4288              CMP      r0,r1                 ;697
0001a6  dbc6              BLT      |L10.310|
0001a8  88e1              LDRH     r1,[r4,#6]            ;723
0001aa  9808              LDR      r0,[sp,#0x20]         ;723
0001ac  4408              ADD      r0,r0,r1              ;723
0001ae  4438              ADD      r0,r0,r7              ;723
0001b0  b287              UXTH     r7,r0                 ;723
0001b2  1c76              ADDS     r6,r6,#1              ;724
                  |L10.436|
0001b4  7830              LDRB     r0,[r6,#0]            ;673
0001b6  2800              CMP      r0,#0                 ;673
0001b8  d198              BNE      |L10.236|
                  |L10.442|
0001ba  bf00              NOP                            ;688
                  |L10.444|
0001bc  bf00              NOP      
0001be  e74e              B        |L10.94|
;;;728    
                          ENDP


                          AREA ||i.LCD_DrawBMP||, CODE, READONLY, ALIGN=1

                  LCD_DrawBMP PROC
;;;871    */
;;;872    void LCD_DrawBMP(uint16_t _usX, uint16_t _usY, uint16_t _usHeight, uint16_t _usWidth, uint16_t *_ptr)
000000  e92d43f8          PUSH     {r3-r9,lr}
;;;873    {
000004  4604              MOV      r4,r0
000006  460d              MOV      r5,r1
000008  4616              MOV      r6,r2
00000a  461f              MOV      r7,r3
00000c  f8dd8020          LDR      r8,[sp,#0x20]
;;;874        ST7789V_DrawBMP(_usX, _usY, _usHeight, _usWidth, _ptr);
000010  463b              MOV      r3,r7
000012  4632              MOV      r2,r6
000014  4629              MOV      r1,r5
000016  4620              MOV      r0,r4
000018  f8cd8000          STR      r8,[sp,#0]
00001c  f7fffffe          BL       ST7789V_DrawBMP
;;;875    }
000020  e8bd83f8          POP      {r3-r9,pc}
;;;876    
                          ENDP


                          AREA ||i.LCD_DrawBmp32||, CODE, READONLY, ALIGN=1

                  LCD_DrawBmp32 PROC
;;;1176   */
;;;1177   void LCD_DrawBmp32(uint16_t _usX, uint16_t _usY, uint16_t _usHeight, uint16_t _usWidth, uint8_t *_pBmp)
000000  e92d4fff          PUSH     {r0-r11,lr}
;;;1178   {
000004  b087              SUB      sp,sp,#0x1c
000006  4680              MOV      r8,r0
000008  4689              MOV      r9,r1
;;;1179   	const uint8_t *p;
;;;1180   	uint16_t usOldRGB, usNewRGB;
;;;1181   	int16_t x, y;		/* 用于记录窗口内的相对坐标 */
;;;1182   	uint8_t R1,G1,B1,A;	/* 新像素色彩分量 */
;;;1183   	uint8_t R0,G0,B0;	/* 旧像素色彩分量 */
;;;1184   
;;;1185   	p = (const uint8_t *)_pBmp;
00000a  9c14              LDR      r4,[sp,#0x50]
;;;1186   	p += 54;		/* 直接指向图像数据区 */
00000c  3436              ADDS     r4,r4,#0x36
;;;1187   
;;;1188   	/* 按照BMP位图次序，从左至右，从上至下扫描 */
;;;1189   	for (y = _usHeight - 1; y >= 0; y--)
00000e  9809              LDR      r0,[sp,#0x24]
000010  1e40              SUBS     r0,r0,#1
000012  b207              SXTH     r7,r0
000014  e081              B        |L12.282|
                  |L12.22|
;;;1190   	{
;;;1191   		for (x = 0; x < _usWidth; x++)
000016  2600              MOVS     r6,#0
000018  e07a              B        |L12.272|
                  |L12.26|
;;;1192   		{
;;;1193   			B1 = *p++;
00001a  f8140b01          LDRB     r0,[r4],#1
00001e  9004              STR      r0,[sp,#0x10]
;;;1194   			G1 = *p++;
000020  f8140b01          LDRB     r0,[r4],#1
000024  9005              STR      r0,[sp,#0x14]
;;;1195   			R1 = *p++;
000026  f814bb01          LDRB     r11,[r4],#1
;;;1196   			A = *p++;	/* Alpha 值(透明度)，0-255, 0表示透明，1表示不透明, 中间值表示透明度 */
00002a  f8145b01          LDRB     r5,[r4],#1
;;;1197   
;;;1198   			if (A == 0x00)	/* 需要透明,显示背景 */
00002e  2d00              CMP      r5,#0
000030  d06c              BEQ      |L12.268|
;;;1199   			{
;;;1200   				;	/* 不用刷新背景 */
;;;1201   			}
;;;1202   			else if (A == 0xFF)	/* 完全不透明， 显示新像素 */
000032  2dff              CMP      r5,#0xff
000034  d114              BNE      |L12.96|
;;;1203   			{
;;;1204   				usNewRGB = RGB(R1, G1, B1);
000036  ea4f00eb          ASR      r0,r11,#3
00003a  02c1              LSLS     r1,r0,#11
00003c  9805              LDR      r0,[sp,#0x14]
00003e  1080              ASRS     r0,r0,#2
000040  ea411140          ORR      r1,r1,r0,LSL #5
000044  9804              LDR      r0,[sp,#0x10]
000046  ea4100e0          ORR      r0,r1,r0,ASR #3
00004a  9006              STR      r0,[sp,#0x18]
;;;1205   				//if (_ucFocusMode == 1)
;;;1206   				//{
;;;1207   				//	usNewRGB = Blend565(usNewRGB, CL_YELLOW, 10);
;;;1208   				//}
;;;1209   				LCD_PutPixel(x + _usX, y + _usY, usNewRGB);
00004c  eb070209          ADD      r2,r7,r9
000050  b291              UXTH     r1,r2
000052  eb060208          ADD      r2,r6,r8
000056  b290              UXTH     r0,r2
000058  9a06              LDR      r2,[sp,#0x18]
00005a  f7fffffe          BL       LCD_PutPixel
00005e  e055              B        |L12.268|
                  |L12.96|
;;;1210   			}
;;;1211   			else 	/* 半透明 */
;;;1212   			{
;;;1213   				/* 计算公式： 实际显示颜色 = 前景颜色 * Alpha / 255 + 背景颜色 * (255-Alpha) / 255 */
;;;1214   				usOldRGB = LCD_GetPixel(x + _usX, y + _usY);
000060  eb070209          ADD      r2,r7,r9
000064  b291              UXTH     r1,r2
000066  eb060208          ADD      r2,r6,r8
00006a  b290              UXTH     r0,r2
00006c  f7fffffe          BL       LCD_GetPixel
000070  4682              MOV      r10,r0
;;;1215   				R0 = RGB565_R(usOldRGB);
000072  20f8              MOVS     r0,#0xf8
000074  ea00202a          AND      r0,r0,r10,ASR #8
000078  9003              STR      r0,[sp,#0xc]
;;;1216   				G0 = RGB565_G(usOldRGB);
00007a  20fc              MOVS     r0,#0xfc
00007c  ea0000ea          AND      r0,r0,r10,ASR #3
000080  9002              STR      r0,[sp,#8]
;;;1217   				B0 = RGB565_B(usOldRGB);
000082  20f8              MOVS     r0,#0xf8
000084  ea0000ca          AND      r0,r0,r10,LSL #3
000088  9001              STR      r0,[sp,#4]
;;;1218   
;;;1219   				R1 = (R1 * A) / 255 + R0 * (255 - A) / 255;
00008a  fb0bf005          MUL      r0,r11,r5
00008e  21ff              MOVS     r1,#0xff
000090  fb90f2f1          SDIV     r2,r0,r1
000094  f1c501ff          RSB      r1,r5,#0xff
000098  9803              LDR      r0,[sp,#0xc]
00009a  4341              MULS     r1,r0,r1
00009c  20ff              MOVS     r0,#0xff
00009e  fb91f0f0          SDIV     r0,r1,r0
0000a2  4410              ADD      r0,r0,r2
0000a4  f0000bff          AND      r11,r0,#0xff
;;;1220   				G1 = (G1 * A) / 255 + G0 * (255 - A) / 255;
0000a8  9805              LDR      r0,[sp,#0x14]
0000aa  4368              MULS     r0,r5,r0
0000ac  21ff              MOVS     r1,#0xff
0000ae  fb90f2f1          SDIV     r2,r0,r1
0000b2  f1c501ff          RSB      r1,r5,#0xff
0000b6  9802              LDR      r0,[sp,#8]
0000b8  4341              MULS     r1,r0,r1
0000ba  20ff              MOVS     r0,#0xff
0000bc  fb91f0f0          SDIV     r0,r1,r0
0000c0  4410              ADD      r0,r0,r2
0000c2  b2c0              UXTB     r0,r0
0000c4  9005              STR      r0,[sp,#0x14]
;;;1221   				B1 = (B1 * A) / 255 + B0 * (255 - A) / 255;
0000c6  9804              LDR      r0,[sp,#0x10]
0000c8  4368              MULS     r0,r5,r0
0000ca  21ff              MOVS     r1,#0xff
0000cc  fb90f2f1          SDIV     r2,r0,r1
0000d0  f1c501ff          RSB      r1,r5,#0xff
0000d4  9801              LDR      r0,[sp,#4]
0000d6  4341              MULS     r1,r0,r1
0000d8  20ff              MOVS     r0,#0xff
0000da  fb91f0f0          SDIV     r0,r1,r0
0000de  4410              ADD      r0,r0,r2
0000e0  b2c0              UXTB     r0,r0
0000e2  9004              STR      r0,[sp,#0x10]
;;;1222   				usNewRGB = RGB(R1, G1, B1);
0000e4  ea4f00eb          ASR      r0,r11,#3
0000e8  02c1              LSLS     r1,r0,#11
0000ea  9805              LDR      r0,[sp,#0x14]
0000ec  1080              ASRS     r0,r0,#2
0000ee  ea411140          ORR      r1,r1,r0,LSL #5
0000f2  9804              LDR      r0,[sp,#0x10]
0000f4  ea4100e0          ORR      r0,r1,r0,ASR #3
0000f8  9006              STR      r0,[sp,#0x18]
;;;1223   				//if (_ucFocusMode == 1)
;;;1224   				//{
;;;1225   				//	usNewRGB = Blend565(usNewRGB, CL_YELLOW, 10);
;;;1226   				//}
;;;1227   				LCD_PutPixel(x + _usX, y + _usY, usNewRGB);
0000fa  eb070209          ADD      r2,r7,r9
0000fe  b291              UXTH     r1,r2
000100  eb060208          ADD      r2,r6,r8
000104  b290              UXTH     r0,r2
000106  9a06              LDR      r2,[sp,#0x18]
000108  f7fffffe          BL       LCD_PutPixel
                  |L12.268|
00010c  1c70              ADDS     r0,r6,#1              ;1191
00010e  b206              SXTH     r6,r0                 ;1191
                  |L12.272|
000110  980a              LDR      r0,[sp,#0x28]         ;1191
000112  4286              CMP      r6,r0                 ;1191
000114  db81              BLT      |L12.26|
000116  1e78              SUBS     r0,r7,#1              ;1189
000118  b207              SXTH     r7,r0                 ;1189
                  |L12.282|
00011a  2f00              CMP      r7,#0                 ;1189
00011c  f6bfaf7b          BGE      |L12.22|
;;;1228   			}
;;;1229   		}
;;;1230   	}
;;;1231   }
000120  b00b              ADD      sp,sp,#0x2c
000122  e8bd8ff0          POP      {r4-r11,pc}
;;;1232   
                          ENDP


                          AREA ||i.LCD_DrawButton||, CODE, READONLY, ALIGN=1

                  LCD_DrawButton PROC
;;;1425   */
;;;1426   void LCD_DrawButton(BUTTON_T *_pBtn)
000000  e92d41ff          PUSH     {r0-r8,lr}
;;;1427   {
000004  4604              MOV      r4,r0
;;;1428   #if 1
;;;1429   	uint16_t x, y, h;
;;;1430   	FONT_T font;	/* 按钮激活时，需要更改字体设置，因此需要一个变量来保存 */
;;;1431   
;;;1432   	font.FontCode = _pBtn->Font->FontCode;
000006  68e0              LDR      r0,[r4,#0xc]
000008  7800              LDRB     r0,[r0,#0]
00000a  f88d0008          STRB     r0,[sp,#8]
;;;1433   	font.FrontColor = _pBtn->Font->FrontColor;
00000e  68e0              LDR      r0,[r4,#0xc]
000010  8840              LDRH     r0,[r0,#2]
000012  f8ad000a          STRH     r0,[sp,#0xa]
;;;1434   	font.BackColor = _pBtn->Font->BackColor;
000016  68e0              LDR      r0,[r4,#0xc]
000018  8880              LDRH     r0,[r0,#4]
00001a  f8ad000c          STRH     r0,[sp,#0xc]
;;;1435   	font.Space = _pBtn->Font->Space;	
00001e  68e0              LDR      r0,[r4,#0xc]
000020  88c0              LDRH     r0,[r0,#6]
000022  f8ad000e          STRH     r0,[sp,#0xe]
;;;1436   			
;;;1437   	if (_pBtn->Focus == 1)
000026  7d20              LDRB     r0,[r4,#0x14]
000028  2801              CMP      r0,#1
00002a  d104              BNE      |L13.54|
;;;1438   	{
;;;1439   		font.BackColor = BUTTON_ACTIVE_COLOR;
00002c  f64770ff          MOV      r0,#0x7fff
000030  f8ad000c          STRH     r0,[sp,#0xc]
000034  e003              B        |L13.62|
                  |L13.54|
;;;1440   	}
;;;1441   	else
;;;1442   	{
;;;1443   		/* 按钮的背景色统一管理，不能单独指定 */
;;;1444   		font.BackColor = BUTTON_BACK_COLOR;
000036  f64c6059          MOV      r0,#0xce59
00003a  f8ad000c          STRH     r0,[sp,#0xc]
                  |L13.62|
;;;1445   	}
;;;1446   	
;;;1447   	/* 仿XP风格，平面编辑框 */
;;;1448   	LCD_DrawRect(_pBtn->Left, _pBtn->Top, _pBtn->Height, _pBtn->Width, BUTTON_BORDER_COLOR);
00003e  2010              MOVS     r0,#0x10
000040  9000              STR      r0,[sp,#0]
000042  8923              LDRH     r3,[r4,#8]
000044  88e2              LDRH     r2,[r4,#6]
000046  88a1              LDRH     r1,[r4,#4]
000048  8860              LDRH     r0,[r4,#2]
00004a  f7fffffe          BL       LCD_DrawRect
;;;1449   	LCD_DrawRect(_pBtn->Left + 1, _pBtn->Top + 1, _pBtn->Height - 2, _pBtn->Width - 2, BUTTON_BORDER1_COLOR);
00004e  f64f70ff          MOV      r0,#0xffff
000052  9000              STR      r0,[sp,#0]
000054  f8b4c008          LDRH     r12,[r4,#8]
000058  f1ac0c02          SUB      r12,r12,#2
00005c  fa1ff38c          UXTH     r3,r12
000060  f8b4c006          LDRH     r12,[r4,#6]
000064  f1ac0c02          SUB      r12,r12,#2
000068  fa1ff28c          UXTH     r2,r12
00006c  f8b4c004          LDRH     r12,[r4,#4]
000070  f10c0c01          ADD      r12,r12,#1
000074  fa1ff18c          UXTH     r1,r12
000078  f8b4c002          LDRH     r12,[r4,#2]
00007c  f10c0c01          ADD      r12,r12,#1
000080  fa1ff08c          UXTH     r0,r12
000084  f7fffffe          BL       LCD_DrawRect
;;;1450   	LCD_DrawRect(_pBtn->Left + 2, _pBtn->Top + 2, _pBtn->Height - 4, _pBtn->Width - 4, BUTTON_BORDER2_COLOR);
000088  f24940b2          MOV      r0,#0x94b2
00008c  9000              STR      r0,[sp,#0]
00008e  f8b4c008          LDRH     r12,[r4,#8]
000092  f1ac0c04          SUB      r12,r12,#4
000096  fa1ff38c          UXTH     r3,r12
00009a  f8b4c006          LDRH     r12,[r4,#6]
00009e  f1ac0c04          SUB      r12,r12,#4
0000a2  fa1ff28c          UXTH     r2,r12
0000a6  f8b4c004          LDRH     r12,[r4,#4]
0000aa  f10c0c02          ADD      r12,r12,#2
0000ae  fa1ff18c          UXTH     r1,r12
0000b2  f8b4c002          LDRH     r12,[r4,#2]
0000b6  f10c0c02          ADD      r12,r12,#2
0000ba  fa1ff08c          UXTH     r0,r12
0000be  f7fffffe          BL       LCD_DrawRect
;;;1451   
;;;1452   	h =  LCD_GetFontHeight(&font);
0000c2  a802              ADD      r0,sp,#8
0000c4  f7fffffe          BL       LCD_GetFontHeight
0000c8  4605              MOV      r5,r0
;;;1453   	x = _pBtn->Left + 3;
0000ca  8860              LDRH     r0,[r4,#2]
0000cc  1cc0              ADDS     r0,r0,#3
0000ce  b286              UXTH     r6,r0
;;;1454   	y = _pBtn->Top + _pBtn->Height / 2 - h / 2;		
0000d0  88e0              LDRH     r0,[r4,#6]
0000d2  eb0072d0          ADD      r2,r0,r0,LSR #31
0000d6  88a3              LDRH     r3,[r4,#4]
0000d8  eb030262          ADD      r2,r3,r2,ASR #1
0000dc  4629              MOV      r1,r5
0000de  eb0573d1          ADD      r3,r5,r1,LSR #31
0000e2  eba20263          SUB      r2,r2,r3,ASR #1
0000e6  b297              UXTH     r7,r2
;;;1455   	
;;;1456   	LCD_Fill_Rect(_pBtn->Left + 3, _pBtn->Top + 3, _pBtn->Height - 6, _pBtn->Width - 6, font.BackColor);	/* 选中后的底色 */
0000e8  f8bd000c          LDRH     r0,[sp,#0xc]
0000ec  9000              STR      r0,[sp,#0]
0000ee  f8b4c008          LDRH     r12,[r4,#8]
0000f2  f1ac0c06          SUB      r12,r12,#6
0000f6  fa1ff38c          UXTH     r3,r12
0000fa  f8b4c006          LDRH     r12,[r4,#6]
0000fe  f1ac0c06          SUB      r12,r12,#6
000102  fa1ff28c          UXTH     r2,r12
000106  f8b4c004          LDRH     r12,[r4,#4]
00010a  f10c0c03          ADD      r12,r12,#3
00010e  fa1ff18c          UXTH     r1,r12
000112  f8b4c002          LDRH     r12,[r4,#2]
000116  f10c0c03          ADD      r12,r12,#3
00011a  fa1ff08c          UXTH     r0,r12
00011e  f7fffffe          BL       LCD_Fill_Rect
;;;1457   	LCD_DispStrEx(x, y, _pBtn->pCaption, &font, _pBtn->Width - 6, ALIGN_CENTER);	/* 水平居中 */		
000122  2101              MOVS     r1,#1
000124  8920              LDRH     r0,[r4,#8]
000126  1f80              SUBS     r0,r0,#6
000128  b280              UXTH     r0,r0
00012a  e9cd0100          STRD     r0,r1,[sp,#0]
00012e  ab02              ADD      r3,sp,#8
000130  4639              MOV      r1,r7
000132  4630              MOV      r0,r6
000134  6922              LDR      r2,[r4,#0x10]
000136  f7fffffe          BL       LCD_DispStrEx
;;;1458   
;;;1459   #else
;;;1460   	if (g_ChipID == IC_8875)
;;;1461   	{
;;;1462   		uint16_t len, x, y;
;;;1463   
;;;1464   		if (_pBtn->Focus == 1)
;;;1465   		{
;;;1466   			/* 仿XP风格，平面编辑框 */
;;;1467   			RA8875_DrawRect(_pBtn->Left, _pBtn->Top, _pBtn->Height, _pBtn->Width, BUTTON_BORDER_COLOR);
;;;1468   			RA8875_DrawRect(_pBtn->Left + 1, _pBtn->Top + 1, _pBtn->Height - 2, _pBtn->Width - 2, BUTTON_BORDER1_COLOR);
;;;1469   			RA8875_DrawRect(_pBtn->Left + 2, _pBtn->Top + 2, _pBtn->Height - 4, _pBtn->Width - 4, BUTTON_BORDER2_COLOR);
;;;1470   
;;;1471   			RA8875_FillRect(_pBtn->Left + 3, _pBtn->Top + 3, _pBtn->Height - 6, _pBtn->Width - 6, BUTTON_ACTIVE_COLOR);
;;;1472   
;;;1473   			RA8875_SetBackColor(BUTTON_ACTIVE_COLOR);
;;;1474   		}
;;;1475   		else
;;;1476   		{
;;;1477   			/* 仿XP风格，平面编辑框 */
;;;1478   			RA8875_DrawRect(_pBtn->Left, _pBtn->Top, _pBtn->Height, _pBtn->Width, BUTTON_BORDER_COLOR);
;;;1479   			RA8875_DrawRect(_pBtn->Left + 1, _pBtn->Top + 1, _pBtn->Height - 2, _pBtn->Width - 2, BUTTON_BORDER1_COLOR);
;;;1480   			RA8875_DrawRect(_pBtn->Left + 2, _pBtn->Top + 2, _pBtn->Height - 4, _pBtn->Width - 4, BUTTON_BORDER2_COLOR);
;;;1481   
;;;1482   			RA8875_FillRect(_pBtn->Left + 3, _pBtn->Top + 3, _pBtn->Height - 6, _pBtn->Width - 6, BUTTON_BACK_COLOR);
;;;1483   
;;;1484   			RA8875_SetBackColor(BUTTON_BACK_COLOR);
;;;1485   		}
;;;1486   
;;;1487   		#if 1	/* 按钮文字字体和颜色固定 */
;;;1488   			if (strcmp(_pBtn->Caption, "←") == 0)	/* 退格键特殊处理 */
;;;1489   			{
;;;1490   				/* 退格键符号是单像素笔画，太细了不协调，因此特殊处理 */
;;;1491   				RA8875_SetFont(RA_FONT_16, 0, 0);
;;;1492   				RA8875_SetFrontColor(CL_BLACK);
;;;1493   				RA8875_SetTextZoom(RA_SIZE_X2, RA_SIZE_X2);	/* 放大2倍 */
;;;1494   			}
;;;1495   			else
;;;1496   			{
;;;1497   				RA8875_SetFont(RA_FONT_16, 0, 0);
;;;1498   				RA8875_SetFrontColor(CL_BLACK);
;;;1499   				RA8875_SetTextZoom(RA_SIZE_X1, RA_SIZE_X1);	/* 放大1倍 */
;;;1500   			}
;;;1501   		#else	/* 按钮文字字体和颜色有应用程序指定 */
;;;1502   			RA8875_SetFont(_pBtn->Font.FontCode, 0, 0);
;;;1503   			RA8875_SetFrontColor(_pBtn->Font.FrontColor);
;;;1504   		#endif
;;;1505   
;;;1506   		/* 文字居中 */
;;;1507   		len = strlen(_pBtn->Caption);
;;;1508   
;;;1509   		/* 此处统计不等宽字符有问题。暂时特殊处理下 */
;;;1510   		if (len != 3)
;;;1511   		{
;;;1512   			x = _pBtn->Left + (_pBtn->Width - len * 16) / 2;
;;;1513   		}
;;;1514   		else
;;;1515   		{
;;;1516   			x = _pBtn->Left + (_pBtn->Width - len * 20) / 2;
;;;1517   		}
;;;1518   
;;;1519   		/* 对特殊字符特殊处理 */
;;;1520   		if ((len == 1) && (_pBtn->Caption[0] == '.'))
;;;1521   		{
;;;1522   			y = _pBtn->Top + 3;
;;;1523   			x += 3;
;;;1524   		}
;;;1525   		else
;;;1526   		{
;;;1527   			y = _pBtn->Top + 3;
;;;1528   		}
;;;1529   
;;;1530   		RA8875_DispStr(x, y, _pBtn->Caption);
;;;1531   
;;;1532   		RA8875_SetTextZoom(RA_SIZE_X1, RA_SIZE_X1);	/* 还原放大1倍 */
;;;1533   	}
;;;1534   #endif
;;;1535   }
00013a  e8bd81ff          POP      {r0-r8,pc}
;;;1536   
                          ENDP


                          AREA ||i.LCD_DrawCheckBox||, CODE, READONLY, ALIGN=2

                  LCD_DrawCheckBox PROC
;;;1292   */
;;;1293   void LCD_DrawCheckBox(CHECK_T *_pCheckBox)
000000  b57c              PUSH     {r2-r6,lr}
;;;1294   {
000002  4604              MOV      r4,r0
;;;1295   #if 1
;;;1296   	uint16_t x, y;
;;;1297   
;;;1298   	/* 目前只做了16点阵汉字的大小 */
;;;1299   
;;;1300   	/* 绘制外框 */
;;;1301   	x = _pCheckBox->Left;
000004  8865              LDRH     r5,[r4,#2]
;;;1302   	LCD_DrawRect(x, _pCheckBox->Top, CHECK_BOX_H, CHECK_BOX_W, CHECK_BOX_BORDER_COLOR);
000006  2010              MOVS     r0,#0x10
000008  9000              STR      r0,[sp,#0]
00000a  88a1              LDRH     r1,[r4,#4]
00000c  2318              MOVS     r3,#0x18
00000e  461a              MOV      r2,r3
000010  4628              MOV      r0,r5
000012  f7fffffe          BL       LCD_DrawRect
;;;1303   	LCD_DrawRect(x + 1, _pCheckBox->Top + 1, CHECK_BOX_H - 2, CHECK_BOX_W - 2, CHECK_BOX_BORDER_COLOR);
000016  2010              MOVS     r0,#0x10
000018  9000              STR      r0,[sp,#0]
00001a  88a2              LDRH     r2,[r4,#4]
00001c  1c52              ADDS     r2,r2,#1
00001e  b291              UXTH     r1,r2
000020  1c6a              ADDS     r2,r5,#1
000022  b290              UXTH     r0,r2
000024  2316              MOVS     r3,#0x16
000026  461a              MOV      r2,r3
000028  f7fffffe          BL       LCD_DrawRect
;;;1304   	LCD_Fill_Rect(x + 2, _pCheckBox->Top + 2, CHECK_BOX_H - 4, CHECK_BOX_W - 4, CHECK_BOX_BACK_COLOR);
00002c  f64c6059          MOV      r0,#0xce59
000030  9000              STR      r0,[sp,#0]
000032  88a2              LDRH     r2,[r4,#4]
000034  1c92              ADDS     r2,r2,#2
000036  b291              UXTH     r1,r2
000038  1caa              ADDS     r2,r5,#2
00003a  b290              UXTH     r0,r2
00003c  2314              MOVS     r3,#0x14
00003e  461a              MOV      r2,r3
000040  f7fffffe          BL       LCD_Fill_Rect
;;;1305   
;;;1306   	/* 绘制文本标签 */
;;;1307   	x = _pCheckBox->Left + CHECK_BOX_W + 2;
000044  8860              LDRH     r0,[r4,#2]
000046  301a              ADDS     r0,r0,#0x1a
000048  b285              UXTH     r5,r0
;;;1308   	y = _pCheckBox->Top + CHECK_BOX_H / 2 - 8;
00004a  88a0              LDRH     r0,[r4,#4]
00004c  1d00              ADDS     r0,r0,#4
00004e  b286              UXTH     r6,r0
;;;1309   	LCD_DispStr(x, y, _pCheckBox->pCaption, _pCheckBox->Font);
000050  4631              MOV      r1,r6
000052  4628              MOV      r0,r5
000054  e9d43203          LDRD     r3,r2,[r4,#0xc]
000058  f7fffffe          BL       LCD_DispStr
;;;1310   
;;;1311   	if (_pCheckBox->Checked)
00005c  7d20              LDRB     r0,[r4,#0x14]
00005e  b1c0              CBZ      r0,|L14.146|
;;;1312   	{
;;;1313   		FONT_T font;
;;;1314   
;;;1315   	    font.FontCode = FC_ST_16;
000060  2001              MOVS     r0,#1
000062  f88d0000          STRB     r0,[sp,#0]
;;;1316   		font.BackColor = CL_MASK;
000066  f6491099          MOV      r0,#0x9999
00006a  f8ad0004          STRH     r0,[sp,#4]
;;;1317   		font.FrontColor = CHECK_BOX_CHECKED_COLOR;	/* 钩的颜色 */
00006e  f44f4078          MOV      r0,#0xf800
000072  f8ad0002          STRH     r0,[sp,#2]
;;;1318   		font.Space = 0;
000076  2000              MOVS     r0,#0
000078  f8ad0006          STRH     r0,[sp,#6]
;;;1319   		x = _pCheckBox->Left;
00007c  8865              LDRH     r5,[r4,#2]
;;;1320   		LCD_DispStr(x + 3, _pCheckBox->Top + 3, "√", &font);
00007e  88a2              LDRH     r2,[r4,#4]
000080  1cd2              ADDS     r2,r2,#3
000082  b291              UXTH     r1,r2
000084  1cea              ADDS     r2,r5,#3
000086  b290              UXTH     r0,r2
000088  466b              MOV      r3,sp
00008a  a202              ADR      r2,|L14.148|
00008c  f7fffffe          BL       LCD_DispStr
;;;1321   	}
000090  bf00              NOP      
                  |L14.146|
;;;1322   #else
;;;1323   	if (g_ChipID == IC_8875)
;;;1324   	{
;;;1325   		uint16_t x;
;;;1326   
;;;1327   		RA8875_SetFont(_pCheckBox->Font.FontCode, 0, 0);	/* 设置32点阵字体，行间距=0，字间距=0 */
;;;1328   
;;;1329   		/* 绘制标签 */
;;;1330   		//RA8875_SetBackColor(_pCheckBox->Font.BackColor);
;;;1331   		RA8875_SetBackColor(WIN_BODY_COLOR);
;;;1332   		RA8875_SetFrontColor(_pCheckBox->Font.FrontColor);
;;;1333   		RA8875_DispStr(_pCheckBox->Left, _pCheckBox->Top, _pCheckBox->Caption);
;;;1334   
;;;1335   		/* 绘制外框 */
;;;1336   		x = _pCheckBox->Left + _pCheckBox->Width - CHECK_BOX_W;
;;;1337   		RA8875_DrawRect(x, _pCheckBox->Top, CHECK_BOX_H, CHECK_BOX_W, CHECK_BOX_BORDER_COLOR);
;;;1338   		RA8875_DrawRect(x + 1, _pCheckBox->Top + 1, CHECK_BOX_H - 2, CHECK_BOX_W - 2, CHECK_BOX_BORDER_COLOR);
;;;1339   		RA8875_FillRect(x + 2, _pCheckBox->Top + 2, CHECK_BOX_H - 4, CHECK_BOX_W - 4, CHECK_BOX_BACK_COLOR);
;;;1340   
;;;1341   		if (_pCheckBox->Checked)
;;;1342   		{
;;;1343   			RA8875_SetBackColor(CHECK_BOX_BACK_COLOR);
;;;1344   			RA8875_SetFrontColor(CL_RED);
;;;1345   			RA8875_DispStr(x + 3, _pCheckBox->Top + 3, "√");
;;;1346   		}
;;;1347   	}
;;;1348   	else
;;;1349   	{
;;;1350   
;;;1351   	}
;;;1352   #endif
;;;1353   
;;;1354   }
000092  bd7c              POP      {r2-r6,pc}
;;;1355   
                          ENDP

                  |L14.148|
000094  a1cc00            DCB      161,204,0
000097  00                DCB      0

                          AREA ||i.LCD_DrawCircle||, CODE, READONLY, ALIGN=1

                  LCD_DrawCircle PROC
;;;854    */
;;;855    void LCD_DrawCircle(uint16_t _usX, uint16_t _usY, uint16_t _usRadius, uint16_t _usColor)
000000  e92d41f0          PUSH     {r4-r8,lr}
;;;856    {
000004  4604              MOV      r4,r0
000006  460d              MOV      r5,r1
000008  4616              MOV      r6,r2
00000a  461f              MOV      r7,r3
;;;857    	ST7789V_DrawCircle(_usX, _usY, _usRadius, _usColor);
00000c  463b              MOV      r3,r7
00000e  4632              MOV      r2,r6
000010  4629              MOV      r1,r5
000012  4620              MOV      r0,r4
000014  f7fffffe          BL       ST7789V_DrawCircle
;;;858    }
000018  e8bd81f0          POP      {r4-r8,pc}
;;;859    
                          ENDP


                          AREA ||i.LCD_DrawEdit||, CODE, READONLY, ALIGN=1

                  LCD_DrawEdit PROC
;;;1363   */
;;;1364   void LCD_DrawEdit(EDIT_T *_pEdit)
000000  e92d43f8          PUSH     {r3-r9,lr}
;;;1365   {
000004  4604              MOV      r4,r0
;;;1366   #if 1
;;;1367   	uint16_t len, x, y;
;;;1368   	uint8_t width;
;;;1369   
;;;1370   	/* 仿XP风格，平面编辑框 */
;;;1371   	LCD_DrawRect(_pEdit->Left, _pEdit->Top, _pEdit->Height, _pEdit->Width, EDIT_BORDER_COLOR);
000006  2010              MOVS     r0,#0x10
000008  9000              STR      r0,[sp,#0]
00000a  8923              LDRH     r3,[r4,#8]
00000c  88e2              LDRH     r2,[r4,#6]
00000e  88a1              LDRH     r1,[r4,#4]
000010  8860              LDRH     r0,[r4,#2]
000012  f7fffffe          BL       LCD_DrawRect
;;;1372   	LCD_Fill_Rect(_pEdit->Left + 1, _pEdit->Top + 1, _pEdit->Height - 2, _pEdit->Width - 2, EDIT_BACK_COLOR);
000016  f64f70ff          MOV      r0,#0xffff
00001a  9000              STR      r0,[sp,#0]
00001c  f8b4c008          LDRH     r12,[r4,#8]
000020  f1ac0c02          SUB      r12,r12,#2
000024  fa1ff38c          UXTH     r3,r12
000028  f8b4c006          LDRH     r12,[r4,#6]
00002c  f1ac0c02          SUB      r12,r12,#2
000030  fa1ff28c          UXTH     r2,r12
000034  f8b4c004          LDRH     r12,[r4,#4]
000038  f10c0c01          ADD      r12,r12,#1
00003c  fa1ff18c          UXTH     r1,r12
000040  f8b4c002          LDRH     r12,[r4,#2]
000044  f10c0c01          ADD      r12,r12,#1
000048  fa1ff08c          UXTH     r0,r12
00004c  f7fffffe          BL       LCD_Fill_Rect
;;;1373   
;;;1374   	/* 文字居中 */
;;;1375   	if (_pEdit->Font->FontCode == FC_ST_12)
000050  68e0              LDR      r0,[r4,#0xc]
000052  7800              LDRB     r0,[r0,#0]
000054  b908              CBNZ     r0,|L16.90|
;;;1376   	{
;;;1377   		width = 6;
000056  2506              MOVS     r5,#6
000058  e000              B        |L16.92|
                  |L16.90|
;;;1378   	}
;;;1379   	else
;;;1380   	{
;;;1381   		width = 8;
00005a  2508              MOVS     r5,#8
                  |L16.92|
;;;1382   	}
;;;1383   	len = strlen(_pEdit->pCaption);
00005c  6920              LDR      r0,[r4,#0x10]
00005e  f7fffffe          BL       strlen
000062  b286              UXTH     r6,r0
;;;1384   	x = _pEdit->Left +  (_pEdit->Width - len * width) / 2;
000064  8921              LDRH     r1,[r4,#8]
000066  fb061015          MLS      r0,r6,r5,r1
00006a  eb0071d0          ADD      r1,r0,r0,LSR #31
00006e  8862              LDRH     r2,[r4,#2]
000070  eb020161          ADD      r1,r2,r1,ASR #1
000074  b28f              UXTH     r7,r1
;;;1385   	y = _pEdit->Top + _pEdit->Height / 2 - width;
000076  88e0              LDRH     r0,[r4,#6]
000078  eb0071d0          ADD      r1,r0,r0,LSR #31
00007c  88a2              LDRH     r2,[r4,#4]
00007e  eb020161          ADD      r1,r2,r1,ASR #1
000082  1b49              SUBS     r1,r1,r5
000084  fa1ff881          UXTH     r8,r1
;;;1386   
;;;1387   	LCD_DispStr(x, y, _pEdit->pCaption, _pEdit->Font);
000088  4641              MOV      r1,r8
00008a  4638              MOV      r0,r7
00008c  e9d43203          LDRD     r3,r2,[r4,#0xc]
000090  f7fffffe          BL       LCD_DispStr
;;;1388   #else
;;;1389   	if (g_ChipID == IC_8875)
;;;1390   	{
;;;1391   		uint16_t len, x;
;;;1392   
;;;1393   		/* 仿XP风格，平面编辑框 */
;;;1394   		RA8875_DrawRect(_pEdit->Left, _pEdit->Top, _pEdit->Height, _pEdit->Width, EDIT_BORDER_COLOR);
;;;1395   		RA8875_FillRect(_pEdit->Left + 1, _pEdit->Top + 1, _pEdit->Height - 2, _pEdit->Width - 2, EDIT_BACK_COLOR);
;;;1396   
;;;1397   		RA8875_SetFont(_pEdit->Font.FontCode, 0, 0);	/* 设置32点阵字体，行间距=0，字间距=0 */
;;;1398   		RA8875_SetFrontColor(_pEdit->Font.FrontColor);
;;;1399   		RA8875_SetBackColor(EDIT_BACK_COLOR);
;;;1400   
;;;1401   		/* 文字居中 */
;;;1402   		len = strlen(_pEdit->Caption);
;;;1403   		x = (_pEdit->Width - len * 16) / 2;
;;;1404   
;;;1405   		RA8875_DispStr(_pEdit->Left + x, _pEdit->Top + 3, _pEdit->Caption);
;;;1406   	}
;;;1407   	else
;;;1408   	{
;;;1409   		//SPFD5420_DrawCircle(_usX, _usY, _usRadius, _usColor);
;;;1410   	}
;;;1411   #endif
;;;1412   }
000094  e8bd83f8          POP      {r3-r9,pc}
;;;1413   
                          ENDP


                          AREA ||i.LCD_DrawGroupBox||, CODE, READONLY, ALIGN=1

                  LCD_DrawGroupBox PROC
;;;1544   */
;;;1545   void LCD_DrawGroupBox(GROUP_T *_pBox)
000000  b5f8              PUSH     {r3-r7,lr}
;;;1546   {
000002  4604              MOV      r4,r0
;;;1547   	uint16_t x, y;
;;;1548   
;;;1549   	/* 画阴影线 */
;;;1550   	LCD_DrawRect(_pBox->Left + 1, _pBox->Top + 5, _pBox->Height, _pBox->Width - 1, CL_BOX_BORDER2);
000004  f64f70ff          MOV      r0,#0xffff
000008  9000              STR      r0,[sp,#0]
00000a  8927              LDRH     r7,[r4,#8]
00000c  1e7f              SUBS     r7,r7,#1
00000e  b2bb              UXTH     r3,r7
000010  88e2              LDRH     r2,[r4,#6]
000012  88a7              LDRH     r7,[r4,#4]
000014  1d7f              ADDS     r7,r7,#5
000016  b2b9              UXTH     r1,r7
000018  8867              LDRH     r7,[r4,#2]
00001a  1c7f              ADDS     r7,r7,#1
00001c  b2b8              UXTH     r0,r7
00001e  f7fffffe          BL       LCD_DrawRect
;;;1551   
;;;1552   	/* 画主框线 */
;;;1553   	LCD_DrawRect(_pBox->Left, _pBox->Top + 4, _pBox->Height, _pBox->Width - 1, CL_BOX_BORDER1);
000022  f64a5053          MOV      r0,#0xad53
000026  9000              STR      r0,[sp,#0]
000028  8927              LDRH     r7,[r4,#8]
00002a  1e7f              SUBS     r7,r7,#1
00002c  b2bb              UXTH     r3,r7
00002e  88e2              LDRH     r2,[r4,#6]
000030  88a7              LDRH     r7,[r4,#4]
000032  1d3f              ADDS     r7,r7,#4
000034  b2b9              UXTH     r1,r7
000036  8860              LDRH     r0,[r4,#2]
000038  f7fffffe          BL       LCD_DrawRect
;;;1554   
;;;1555   	/* 显示分组框标题（文字在左上角） */
;;;1556   	x = _pBox->Left + 9;
00003c  8860              LDRH     r0,[r4,#2]
00003e  3009              ADDS     r0,r0,#9
000040  b285              UXTH     r5,r0
;;;1557   	y = _pBox->Top;
000042  88a6              LDRH     r6,[r4,#4]
;;;1558   	LCD_DispStr(x, y, _pBox->pCaption, _pBox->Font);
000044  4631              MOV      r1,r6
000046  4628              MOV      r0,r5
000048  e9d43203          LDRD     r3,r2,[r4,#0xc]
00004c  f7fffffe          BL       LCD_DispStr
;;;1559   }
000050  bdf8              POP      {r3-r7,pc}
;;;1560   
                          ENDP


                          AREA ||i.LCD_DrawIcon||, CODE, READONLY, ALIGN=1

                  LCD_DrawIcon PROC
;;;945    */
;;;946    void LCD_DrawIcon(const ICON_T *_tIcon, FONT_T *_tFont, uint8_t _ucFocusMode)
000000  e92d4ff7          PUSH     {r0-r2,r4-r11,lr}
;;;947    {
000004  4604              MOV      r4,r0
000006  460f              MOV      r7,r1
;;;948    	const uint16_t *p;
;;;949    	uint16_t usNewRGB;
;;;950    	uint16_t x, y;		/* 用于记录窗口内的相对坐标 */
;;;951    
;;;952    	p = _tIcon->pBmp;
000008  f8d4a00c          LDR      r10,[r4,#0xc]
;;;953    	for (y = 0; y < _tIcon->Height; y++)
00000c  2600              MOVS     r6,#0
00000e  e0ad              B        |L18.364|
                  |L18.16|
;;;954    	{
;;;955    		for (x = 0; x < _tIcon->Width; x++)
000010  2500              MOVS     r5,#0
000012  e0a5              B        |L18.352|
                  |L18.20|
;;;956    		{
;;;957    			usNewRGB = *p++;	/* 读取图标的颜色值后指针加1 */
000014  f83a8b02          LDRH     r8,[r10],#2
;;;958    			/* 将图标的4个直角切割为弧角，弧角外是背景图标 */
;;;959    			if ((y == 0 && (x < 6 || x > _tIcon->Width - 7)) ||
000018  b92e              CBNZ     r6,|L18.38|
00001a  2d06              CMP      r5,#6
                  |L18.28|
00001c  db77              BLT      |L18.270|
00001e  8920              LDRH     r0,[r4,#8]
000020  1fc0              SUBS     r0,r0,#7
000022  42a8              CMP      r0,r5
000024  dbfa              BLT      |L18.28|
                  |L18.38|
;;;960    				(y == 1 && (x < 4 || x > _tIcon->Width - 5)) ||
000026  2e01              CMP      r6,#1
000028  d105              BNE      |L18.54|
00002a  2d04              CMP      r5,#4
00002c  dbf6              BLT      |L18.28|
00002e  8920              LDRH     r0,[r4,#8]
000030  1f40              SUBS     r0,r0,#5
000032  42a8              CMP      r0,r5
000034  dbf2              BLT      |L18.28|
                  |L18.54|
;;;961    				(y == 2 && (x < 3 || x > _tIcon->Width - 4)) ||
000036  2e02              CMP      r6,#2
000038  d105              BNE      |L18.70|
00003a  2d03              CMP      r5,#3
00003c  dbee              BLT      |L18.28|
00003e  8920              LDRH     r0,[r4,#8]
000040  1f00              SUBS     r0,r0,#4
000042  42a8              CMP      r0,r5
000044  dbea              BLT      |L18.28|
                  |L18.70|
;;;962    				(y == 3 && (x < 2 || x > _tIcon->Width - 3)) ||
000046  2e03              CMP      r6,#3
000048  d105              BNE      |L18.86|
00004a  2d02              CMP      r5,#2
00004c  dbe6              BLT      |L18.28|
00004e  8920              LDRH     r0,[r4,#8]
000050  1ec0              SUBS     r0,r0,#3
000052  42a8              CMP      r0,r5
000054  dbe2              BLT      |L18.28|
                  |L18.86|
;;;963    				(y == 4 && (x < 1 || x > _tIcon->Width - 2)) ||
000056  2e04              CMP      r6,#4
000058  d105              BNE      |L18.102|
00005a  2d01              CMP      r5,#1
00005c  db7e              BLT      |L18.348|
00005e  8920              LDRH     r0,[r4,#8]
000060  1e80              SUBS     r0,r0,#2
000062  42a8              CMP      r0,r5
000064  db7a              BLT      |L18.348|
                  |L18.102|
;;;964    				(y == 5 && (x < 1 || x > _tIcon->Width - 2))	||
000066  2e05              CMP      r6,#5
000068  d105              BNE      |L18.118|
00006a  2d01              CMP      r5,#1
00006c  db76              BLT      |L18.348|
00006e  8920              LDRH     r0,[r4,#8]
000070  1e80              SUBS     r0,r0,#2
000072  42a8              CMP      r0,r5
000074  db72              BLT      |L18.348|
                  |L18.118|
;;;965    
;;;966    				(y == _tIcon->Height - 1 && (x < 6 || x > _tIcon->Width - 7)) ||
000076  88e0              LDRH     r0,[r4,#6]
000078  1e40              SUBS     r0,r0,#1
00007a  42b0              CMP      r0,r6
00007c  d105              BNE      |L18.138|
00007e  2d06              CMP      r5,#6
000080  db6c              BLT      |L18.348|
000082  8920              LDRH     r0,[r4,#8]
000084  1fc0              SUBS     r0,r0,#7
000086  42a8              CMP      r0,r5
000088  db68              BLT      |L18.348|
                  |L18.138|
;;;967    				(y == _tIcon->Height - 2 && (x < 4 || x > _tIcon->Width - 5)) ||
00008a  88e0              LDRH     r0,[r4,#6]
00008c  1e80              SUBS     r0,r0,#2
00008e  42b0              CMP      r0,r6
000090  d105              BNE      |L18.158|
000092  2d04              CMP      r5,#4
000094  db62              BLT      |L18.348|
000096  8920              LDRH     r0,[r4,#8]
000098  1f40              SUBS     r0,r0,#5
00009a  42a8              CMP      r0,r5
00009c  db5e              BLT      |L18.348|
                  |L18.158|
;;;968    				(y == _tIcon->Height - 3 && (x < 3 || x > _tIcon->Width - 4)) ||
00009e  88e0              LDRH     r0,[r4,#6]
0000a0  1ec0              SUBS     r0,r0,#3
0000a2  42b0              CMP      r0,r6
0000a4  d105              BNE      |L18.178|
0000a6  2d03              CMP      r5,#3
0000a8  db58              BLT      |L18.348|
0000aa  8920              LDRH     r0,[r4,#8]
0000ac  1f00              SUBS     r0,r0,#4
0000ae  42a8              CMP      r0,r5
0000b0  db54              BLT      |L18.348|
                  |L18.178|
;;;969    				(y == _tIcon->Height - 4 && (x < 2 || x > _tIcon->Width - 3)) ||
0000b2  88e0              LDRH     r0,[r4,#6]
0000b4  1f00              SUBS     r0,r0,#4
0000b6  42b0              CMP      r0,r6
0000b8  d105              BNE      |L18.198|
0000ba  2d02              CMP      r5,#2
0000bc  db4e              BLT      |L18.348|
0000be  8920              LDRH     r0,[r4,#8]
0000c0  1ec0              SUBS     r0,r0,#3
0000c2  42a8              CMP      r0,r5
0000c4  db4a              BLT      |L18.348|
                  |L18.198|
;;;970    				(y == _tIcon->Height - 5 && (x < 1 || x > _tIcon->Width - 2)) ||
0000c6  88e0              LDRH     r0,[r4,#6]
0000c8  1f40              SUBS     r0,r0,#5
0000ca  42b0              CMP      r0,r6
0000cc  d105              BNE      |L18.218|
0000ce  2d01              CMP      r5,#1
0000d0  db44              BLT      |L18.348|
0000d2  8920              LDRH     r0,[r4,#8]
0000d4  1e80              SUBS     r0,r0,#2
0000d6  42a8              CMP      r0,r5
0000d8  db40              BLT      |L18.348|
                  |L18.218|
;;;971    				(y == _tIcon->Height - 6 && (x < 1 || x > _tIcon->Width - 2))
0000da  88e0              LDRH     r0,[r4,#6]
0000dc  1f80              SUBS     r0,r0,#6
0000de  42b0              CMP      r0,r6
0000e0  d105              BNE      |L18.238|
0000e2  2d01              CMP      r5,#1
0000e4  db3a              BLT      |L18.348|
0000e6  8920              LDRH     r0,[r4,#8]
0000e8  1e80              SUBS     r0,r0,#2
0000ea  42a8              CMP      r0,r5
0000ec  db36              BLT      |L18.348|
                  |L18.238|
;;;972    				)
;;;973    			{
;;;974    				;
;;;975    			}
;;;976    			else
;;;977    			{
;;;978    				if (_ucFocusMode != 0)	/* 1表示选中的图标 */
0000ee  9802              LDR      r0,[sp,#8]
0000f0  b358              CBZ      r0,|L18.330|
;;;979    				{
;;;980    					/* 降低原始像素的亮度，实现图标被激活选中的效果 */
;;;981    					uint16_t R,G,B;
;;;982    					uint16_t bright = 15;
0000f2  200f              MOVS     r0,#0xf
;;;983    
;;;984    					/* rrrr rggg gggb bbbb */
;;;985    					R = (usNewRGB & 0xF800) >> 11;
0000f4  ea4f21d8          LSR      r1,r8,#11
;;;986    					G = (usNewRGB & 0x07E0) >> 5;
0000f8  f3c81245          UBFX     r2,r8,#5,#6
;;;987    					B =  usNewRGB & 0x001F;
0000fc  f008031f          AND      r3,r8,#0x1f
;;;988    					if (R > bright)
000100  4281              CMP      r1,r0
000102  dd05              BLE      |L18.272|
;;;989    					{
;;;990    						R -= bright;
000104  eba10c00          SUB      r12,r1,r0
000108  fa1ff18c          UXTH     r1,r12
00010c  e001              B        |L18.274|
                  |L18.270|
00010e  e025              B        |L18.348|
                  |L18.272|
;;;991    					}
;;;992    					else
;;;993    					{
;;;994    						R = 0;
000110  2100              MOVS     r1,#0
                  |L18.274|
;;;995    					}
;;;996    					if (G > 2 * bright)
000112  ea4f0c40          LSL      r12,r0,#1
000116  4594              CMP      r12,r2
000118  da06              BGE      |L18.296|
;;;997    					{
;;;998    						G -= 2 * bright;
00011a  f04f0c02          MOV      r12,#2
00011e  fb0c2c10          MLS      r12,r12,r0,r2
000122  fa1ff28c          UXTH     r2,r12
000126  e000              B        |L18.298|
                  |L18.296|
;;;999    					}
;;;1000   					else
;;;1001   					{
;;;1002   						G = 0;
000128  2200              MOVS     r2,#0
                  |L18.298|
;;;1003   					}
;;;1004   					if (B > bright)
00012a  4283              CMP      r3,r0
00012c  dd04              BLE      |L18.312|
;;;1005   					{
;;;1006   						B -= bright;
00012e  eba30c00          SUB      r12,r3,r0
000132  fa1ff38c          UXTH     r3,r12
000136  e000              B        |L18.314|
                  |L18.312|
;;;1007   					}
;;;1008   					else
;;;1009   					{
;;;1010   						B = 0;
000138  2300              MOVS     r3,#0
                  |L18.314|
;;;1011   					}
;;;1012   					usNewRGB = (R << 11) + (G << 5) + B;
00013a  ea4f2cc1          LSL      r12,r1,#11
00013e  eb0c1c42          ADD      r12,r12,r2,LSL #5
000142  449c              ADD      r12,r12,r3
000144  fa1ff88c          UXTH     r8,r12
;;;1013   				}
000148  bf00              NOP      
                  |L18.330|
;;;1014   
;;;1015   				LCD_PutPixel(x + _tIcon->Left, y + _tIcon->Top, usNewRGB);
00014a  88a2              LDRH     r2,[r4,#4]
00014c  4432              ADD      r2,r2,r6
00014e  b291              UXTH     r1,r2
000150  8862              LDRH     r2,[r4,#2]
000152  442a              ADD      r2,r2,r5
000154  b290              UXTH     r0,r2
000156  4642              MOV      r2,r8
000158  f7fffffe          BL       LCD_PutPixel
                  |L18.348|
00015c  1c68              ADDS     r0,r5,#1              ;955
00015e  b285              UXTH     r5,r0                 ;955
                  |L18.352|
000160  8920              LDRH     r0,[r4,#8]            ;955
000162  42a8              CMP      r0,r5                 ;955
000164  f73faf56          BGT      |L18.20|
000168  1c70              ADDS     r0,r6,#1              ;953
00016a  b286              UXTH     r6,r0                 ;953
                  |L18.364|
00016c  88e0              LDRH     r0,[r4,#6]            ;953
00016e  42b0              CMP      r0,r6                 ;953
000170  f73faf4e          BGT      |L18.16|
;;;1016   			}
;;;1017   		}
;;;1018   	}
;;;1019   
;;;1020   	/* 绘制图标下的文字 */
;;;1021   	{
;;;1022   		uint16_t len;
;;;1023   		uint16_t width;
;;;1024   
;;;1025   		len = strlen(_tIcon->Text);
000174  f1040010          ADD      r0,r4,#0x10
000178  f7fffffe          BL       strlen
00017c  fa1ffb80          UXTH     r11,r0
;;;1026   
;;;1027   		if  (len == 0)
000180  f1bb0f00          CMP      r11,#0
000184  d101              BNE      |L18.394|
                  |L18.390|
;;;1028   		{
;;;1029   			return;	/* 如果图标文本长度为0，则不显示 */
;;;1030   		}
;;;1031   
;;;1032   		/* 计算文本的总宽度 */
;;;1033   		if (_tFont->FontCode == FC_ST_12)		/* 12点阵 */
;;;1034   		{
;;;1035   			width = 6 * (len + _tFont->Space);
;;;1036   		}
;;;1037   		else	/* FC_ST_16 */
;;;1038   		{
;;;1039   			width = 8 * (len + _tFont->Space);
;;;1040   		}
;;;1041   
;;;1042   
;;;1043   		/* 水平居中 */
;;;1044   		x = (_tIcon->Left + _tIcon->Width / 2) - width / 2;
;;;1045   		y = _tIcon->Top + _tIcon->Height + 2;
;;;1046   		LCD_DispStr(x, y, (char *)_tIcon->Text, _tFont);
;;;1047   	}
;;;1048   }
000186  e8bd8ffe          POP      {r1-r11,pc}
                  |L18.394|
00018a  7838              LDRB     r0,[r7,#0]            ;1033
00018c  b938              CBNZ     r0,|L18.414|
00018e  88f8              LDRH     r0,[r7,#6]            ;1035
000190  4458              ADD      r0,r0,r11             ;1035
000192  eb000040          ADD      r0,r0,r0,LSL #1       ;1035
000196  0440              LSLS     r0,r0,#17             ;1035
000198  ea4f4910          LSR      r9,r0,#16             ;1035
00019c  e004              B        |L18.424|
                  |L18.414|
00019e  88f8              LDRH     r0,[r7,#6]            ;1039
0001a0  4458              ADD      r0,r0,r11             ;1039
0001a2  04c0              LSLS     r0,r0,#19             ;1039
0001a4  ea4f4910          LSR      r9,r0,#16             ;1039
                  |L18.424|
0001a8  8920              LDRH     r0,[r4,#8]            ;1044
0001aa  eb0072d0          ADD      r2,r0,r0,LSR #31      ;1044
0001ae  8863              LDRH     r3,[r4,#2]            ;1044
0001b0  eb030262          ADD      r2,r3,r2,ASR #1       ;1044
0001b4  4649              MOV      r1,r9                 ;1044
0001b6  eb0973d1          ADD      r3,r9,r1,LSR #31      ;1044
0001ba  eba20263          SUB      r2,r2,r3,ASR #1       ;1044
0001be  b295              UXTH     r5,r2                 ;1044
0001c0  88a0              LDRH     r0,[r4,#4]            ;1045
0001c2  88e1              LDRH     r1,[r4,#6]            ;1045
0001c4  4408              ADD      r0,r0,r1              ;1045
0001c6  1c80              ADDS     r0,r0,#2              ;1045
0001c8  b286              UXTH     r6,r0                 ;1045
0001ca  463b              MOV      r3,r7                 ;1046
0001cc  f1040210          ADD      r2,r4,#0x10           ;1046
0001d0  4631              MOV      r1,r6                 ;1046
0001d2  4628              MOV      r0,r5                 ;1046
0001d4  f7fffffe          BL       LCD_DispStr
0001d8  bf00              NOP      
0001da  e7d4              B        |L18.390|
;;;1049   
                          ENDP


                          AREA ||i.LCD_DrawIcon32||, CODE, READONLY, ALIGN=1

                  LCD_DrawIcon32 PROC
;;;1080   */
;;;1081   void LCD_DrawIcon32(const ICON_T *_tIcon, FONT_T *_tFont, uint8_t _ucFocusMode)
000000  e92d4ff7          PUSH     {r0-r2,r4-r11,lr}
;;;1082   {
000004  b088              SUB      sp,sp,#0x20
000006  4604              MOV      r4,r0
000008  4689              MOV      r9,r1
;;;1083   	const uint8_t *p;
;;;1084   	uint16_t usOldRGB, usNewRGB;
;;;1085   	int16_t x, y;		/* 用于记录窗口内的相对坐标 */
;;;1086   	uint8_t R1,G1,B1,A;	/* 新像素色彩分量 */
;;;1087   	uint8_t R0,G0,B0;	/* 旧像素色彩分量 */
;;;1088   
;;;1089   	p = (const uint8_t *)_tIcon->pBmp;
00000a  68e5              LDR      r5,[r4,#0xc]
;;;1090   	p += 54;		/* 直接指向图像数据区 */
00000c  3536              ADDS     r5,r5,#0x36
;;;1091   
;;;1092   	/* 按照BMP位图次序，从左至右，从上至下扫描 */
;;;1093   	for (y = _tIcon->Height - 1; y >= 0; y--)
00000e  88e0              LDRH     r0,[r4,#6]
000010  1e40              SUBS     r0,r0,#1
000012  fa0ff880          SXTH     r8,r0
000016  e099              B        |L19.332|
                  |L19.24|
;;;1094   	{
;;;1095   		for (x = 0; x < _tIcon->Width; x++)
000018  2700              MOVS     r7,#0
00001a  e08f              B        |L19.316|
                  |L19.28|
;;;1096   		{
;;;1097   			B1 = *p++;
00001c  f8150b01          LDRB     r0,[r5],#1
000020  9004              STR      r0,[sp,#0x10]
;;;1098   			G1 = *p++;
000022  f8150b01          LDRB     r0,[r5],#1
000026  9005              STR      r0,[sp,#0x14]
;;;1099   			R1 = *p++;
000028  f8150b01          LDRB     r0,[r5],#1
00002c  9006              STR      r0,[sp,#0x18]
;;;1100   			A = *p++;	/* Alpha 值(透明度)，0-255, 0表示透明，1表示不透明, 中间值表示透明度 */
00002e  f8156b01          LDRB     r6,[r5],#1
;;;1101   
;;;1102   			if (A == 0x00)	/* 需要透明,显示背景 */
000032  2e00              CMP      r6,#0
000034  d01f              BEQ      |L19.118|
;;;1103   			{
;;;1104   				;	/* 不用刷新背景 */
;;;1105   			}
;;;1106   			else if (A == 0xFF)	/* 完全不透明， 显示新像素 */
000036  2eff              CMP      r6,#0xff
000038  d11e              BNE      |L19.120|
;;;1107   			{
;;;1108   				usNewRGB = RGB(R1, G1, B1);
00003a  9806              LDR      r0,[sp,#0x18]
00003c  10c0              ASRS     r0,r0,#3
00003e  02c1              LSLS     r1,r0,#11
000040  9805              LDR      r0,[sp,#0x14]
000042  1080              ASRS     r0,r0,#2
000044  ea411140          ORR      r1,r1,r0,LSL #5
000048  9804              LDR      r0,[sp,#0x10]
00004a  ea4100e0          ORR      r0,r1,r0,ASR #3
00004e  9007              STR      r0,[sp,#0x1c]
;;;1109   				if (_ucFocusMode == 1)
000050  980a              LDR      r0,[sp,#0x28]
000052  2801              CMP      r0,#1
000054  d106              BNE      |L19.100|
;;;1110   				{
;;;1111   					usNewRGB = LCD_Blend565(usNewRGB, CL_YELLOW, 10);
000056  220a              MOVS     r2,#0xa
000058  f64f71e0          MOV      r1,#0xffe0
00005c  9807              LDR      r0,[sp,#0x1c]
00005e  f7fffffe          BL       LCD_Blend565
000062  9007              STR      r0,[sp,#0x1c]
                  |L19.100|
;;;1112   				}
;;;1113   				LCD_PutPixel(x + _tIcon->Left, y + _tIcon->Top, usNewRGB);
000064  88a2              LDRH     r2,[r4,#4]
000066  4442              ADD      r2,r2,r8
000068  b291              UXTH     r1,r2
00006a  8862              LDRH     r2,[r4,#2]
00006c  443a              ADD      r2,r2,r7
00006e  b290              UXTH     r0,r2
000070  9a07              LDR      r2,[sp,#0x1c]
000072  f7fffffe          BL       LCD_PutPixel
                  |L19.118|
000076  e05f              B        |L19.312|
                  |L19.120|
;;;1114   			}
;;;1115   			else 	/* 半透明 */
;;;1116   			{
;;;1117   				/* 计算公式： 实际显示颜色 = 前景颜色 * Alpha / 255 + 背景颜色 * (255-Alpha) / 255 */
;;;1118   				usOldRGB = LCD_GetPixel(x + _tIcon->Left, y + _tIcon->Top);
000078  88a2              LDRH     r2,[r4,#4]
00007a  4442              ADD      r2,r2,r8
00007c  b291              UXTH     r1,r2
00007e  8862              LDRH     r2,[r4,#2]
000080  443a              ADD      r2,r2,r7
000082  b290              UXTH     r0,r2
000084  f7fffffe          BL       LCD_GetPixel
000088  4682              MOV      r10,r0
;;;1119   				//usOldRGB = 0xFFFF;
;;;1120   				R0 = RGB565_R(usOldRGB);
00008a  21f8              MOVS     r1,#0xf8
00008c  ea01202a          AND      r0,r1,r10,ASR #8
000090  9003              STR      r0,[sp,#0xc]
;;;1121   				G0 = RGB565_G(usOldRGB);
000092  21fc              MOVS     r1,#0xfc
000094  ea0100ea          AND      r0,r1,r10,ASR #3
000098  9002              STR      r0,[sp,#8]
;;;1122   				B0 = RGB565_B(usOldRGB);
00009a  21f8              MOVS     r1,#0xf8
00009c  ea0100ca          AND      r0,r1,r10,LSL #3
0000a0  9001              STR      r0,[sp,#4]
;;;1123   
;;;1124   				R1 = (R1 * A) / 255 + R0 * (255 - A) / 255;
0000a2  9806              LDR      r0,[sp,#0x18]
0000a4  4370              MULS     r0,r6,r0
0000a6  21ff              MOVS     r1,#0xff
0000a8  fb90f2f1          SDIV     r2,r0,r1
0000ac  f1c601ff          RSB      r1,r6,#0xff
0000b0  9803              LDR      r0,[sp,#0xc]
0000b2  4341              MULS     r1,r0,r1
0000b4  20ff              MOVS     r0,#0xff
0000b6  fb91f0f0          SDIV     r0,r1,r0
0000ba  4410              ADD      r0,r0,r2
0000bc  b2c0              UXTB     r0,r0
0000be  9006              STR      r0,[sp,#0x18]
;;;1125   				G1 = (G1 * A) / 255 + G0 * (255 - A) / 255;
0000c0  9805              LDR      r0,[sp,#0x14]
0000c2  4370              MULS     r0,r6,r0
0000c4  21ff              MOVS     r1,#0xff
0000c6  fb90f2f1          SDIV     r2,r0,r1
0000ca  f1c601ff          RSB      r1,r6,#0xff
0000ce  9802              LDR      r0,[sp,#8]
0000d0  4341              MULS     r1,r0,r1
0000d2  20ff              MOVS     r0,#0xff
0000d4  fb91f0f0          SDIV     r0,r1,r0
0000d8  4410              ADD      r0,r0,r2
0000da  b2c0              UXTB     r0,r0
0000dc  9005              STR      r0,[sp,#0x14]
;;;1126   				B1 = (B1 * A) / 255 + B0 * (255 - A) / 255;
0000de  9804              LDR      r0,[sp,#0x10]
0000e0  4370              MULS     r0,r6,r0
0000e2  21ff              MOVS     r1,#0xff
0000e4  fb90f2f1          SDIV     r2,r0,r1
0000e8  f1c601ff          RSB      r1,r6,#0xff
0000ec  9801              LDR      r0,[sp,#4]
0000ee  4341              MULS     r1,r0,r1
0000f0  20ff              MOVS     r0,#0xff
0000f2  fb91f0f0          SDIV     r0,r1,r0
0000f6  4410              ADD      r0,r0,r2
0000f8  b2c0              UXTB     r0,r0
0000fa  9004              STR      r0,[sp,#0x10]
;;;1127   				usNewRGB = RGB(R1, G1, B1);
0000fc  9806              LDR      r0,[sp,#0x18]
0000fe  10c0              ASRS     r0,r0,#3
000100  02c1              LSLS     r1,r0,#11
000102  9805              LDR      r0,[sp,#0x14]
000104  1080              ASRS     r0,r0,#2
000106  ea411140          ORR      r1,r1,r0,LSL #5
00010a  9804              LDR      r0,[sp,#0x10]
00010c  ea4100e0          ORR      r0,r1,r0,ASR #3
000110  9007              STR      r0,[sp,#0x1c]
;;;1128   				if (_ucFocusMode == 1)
000112  980a              LDR      r0,[sp,#0x28]
000114  2801              CMP      r0,#1
000116  d106              BNE      |L19.294|
;;;1129   				{
;;;1130   					usNewRGB = LCD_Blend565(usNewRGB, CL_YELLOW, 10);
000118  220a              MOVS     r2,#0xa
00011a  f64f71e0          MOV      r1,#0xffe0
00011e  9807              LDR      r0,[sp,#0x1c]
000120  f7fffffe          BL       LCD_Blend565
000124  9007              STR      r0,[sp,#0x1c]
                  |L19.294|
;;;1131   				}
;;;1132   				LCD_PutPixel(x + _tIcon->Left, y + _tIcon->Top, usNewRGB);
000126  88a2              LDRH     r2,[r4,#4]
000128  4442              ADD      r2,r2,r8
00012a  b291              UXTH     r1,r2
00012c  8862              LDRH     r2,[r4,#2]
00012e  443a              ADD      r2,r2,r7
000130  b290              UXTH     r0,r2
000132  9a07              LDR      r2,[sp,#0x1c]
000134  f7fffffe          BL       LCD_PutPixel
                  |L19.312|
000138  1c78              ADDS     r0,r7,#1              ;1095
00013a  b207              SXTH     r7,r0                 ;1095
                  |L19.316|
00013c  8920              LDRH     r0,[r4,#8]            ;1095
00013e  42b8              CMP      r0,r7                 ;1095
000140  f73faf6c          BGT      |L19.28|
000144  f1a80001          SUB      r0,r8,#1              ;1093
000148  fa0ff880          SXTH     r8,r0                 ;1093
                  |L19.332|
00014c  f1b80f00          CMP      r8,#0                 ;1093
000150  f6bfaf62          BGE      |L19.24|
;;;1133   			}
;;;1134   		}
;;;1135   	}
;;;1136   
;;;1137   	/* 绘制图标下的文字 */
;;;1138   	{
;;;1139   		uint16_t len;
;;;1140   		uint16_t width;
;;;1141   
;;;1142   		len = strlen(_tIcon->Text);
000154  f1040010          ADD      r0,r4,#0x10
000158  f7fffffe          BL       strlen
00015c  b280              UXTH     r0,r0
00015e  9000              STR      r0,[sp,#0]
;;;1143   
;;;1144   		if  (len == 0)
000160  9800              LDR      r0,[sp,#0]
000162  b910              CBNZ     r0,|L19.362|
                  |L19.356|
;;;1145   		{
;;;1146   			return;	/* 如果图标文本长度为0，则不显示 */
;;;1147   		}
;;;1148   
;;;1149   		/* 计算文本的总宽度 */
;;;1150   		if (_tFont->FontCode == FC_ST_12)		/* 12点阵 */
;;;1151   		{
;;;1152   			width = 6 * (len + _tFont->Space);
;;;1153   		}
;;;1154   		else	/* FC_ST_16 */
;;;1155   		{
;;;1156   			width = 8 * (len + _tFont->Space);
;;;1157   		}
;;;1158   
;;;1159   
;;;1160   		/* 水平居中 */
;;;1161   		x = (_tIcon->Left + _tIcon->Width / 2) - width / 2;
;;;1162   		y = _tIcon->Top + _tIcon->Height + 2;
;;;1163   		LCD_DispStr(x, y, (char *)_tIcon->Text, _tFont);
;;;1164   	}
;;;1165   }
000164  b00b              ADD      sp,sp,#0x2c
000166  e8bd8ff0          POP      {r4-r11,pc}
                  |L19.362|
00016a  f8990000          LDRB     r0,[r9,#0]            ;1150
00016e  b948              CBNZ     r0,|L19.388|
000170  f8b91006          LDRH     r1,[r9,#6]            ;1152
000174  9800              LDR      r0,[sp,#0]            ;1152
000176  4408              ADD      r0,r0,r1              ;1152
000178  eb000040          ADD      r0,r0,r0,LSL #1       ;1152
00017c  0440              LSLS     r0,r0,#17             ;1152
00017e  ea4f4b10          LSR      r11,r0,#16            ;1152
000182  e006              B        |L19.402|
                  |L19.388|
000184  f8b91006          LDRH     r1,[r9,#6]            ;1156
000188  9800              LDR      r0,[sp,#0]            ;1156
00018a  4408              ADD      r0,r0,r1              ;1156
00018c  04c0              LSLS     r0,r0,#19             ;1156
00018e  ea4f4b10          LSR      r11,r0,#16            ;1156
                  |L19.402|
000192  8920              LDRH     r0,[r4,#8]            ;1161
000194  eb0072d0          ADD      r2,r0,r0,LSR #31      ;1161
000198  8863              LDRH     r3,[r4,#2]            ;1161
00019a  eb030262          ADD      r2,r3,r2,ASR #1       ;1161
00019e  4659              MOV      r1,r11                ;1161
0001a0  eb0b73d1          ADD      r3,r11,r1,LSR #31     ;1161
0001a4  eba20263          SUB      r2,r2,r3,ASR #1       ;1161
0001a8  b217              SXTH     r7,r2                 ;1161
0001aa  88a0              LDRH     r0,[r4,#4]            ;1162
0001ac  88e1              LDRH     r1,[r4,#6]            ;1162
0001ae  4408              ADD      r0,r0,r1              ;1162
0001b0  1c80              ADDS     r0,r0,#2              ;1162
0001b2  fa0ff880          SXTH     r8,r0                 ;1162
0001b6  fa1ff188          UXTH     r1,r8                 ;1163
0001ba  b2b8              UXTH     r0,r7                 ;1163
0001bc  464b              MOV      r3,r9                 ;1163
0001be  f1040210          ADD      r2,r4,#0x10           ;1163
0001c2  f7fffffe          BL       LCD_DispStr
0001c6  bf00              NOP      
0001c8  e7cc              B        |L19.356|
;;;1166   
                          ENDP


                          AREA ||i.LCD_DrawLabel||, CODE, READONLY, ALIGN=1

                  LCD_DrawLabel PROC
;;;1240   */
;;;1241   void LCD_DrawLabel(LABEL_T *_pLabel)
000000  b5f0              PUSH     {r4-r7,lr}
;;;1242   {
000002  b0c1              SUB      sp,sp,#0x104
000004  4604              MOV      r4,r0
;;;1243   #if 1
;;;1244   	char dispbuf[256];
;;;1245   	uint16_t i;
;;;1246   	uint16_t NewLen;
;;;1247   
;;;1248   	NewLen = strlen(_pLabel->pCaption);
000006  6920              LDR      r0,[r4,#0x10]
000008  f7fffffe          BL       strlen
00000c  b286              UXTH     r6,r0
;;;1249   
;;;1250   	if (NewLen > _pLabel->MaxLen)
00000e  8960              LDRH     r0,[r4,#0xa]
000010  42b0              CMP      r0,r6
000012  da07              BGE      |L20.36|
;;;1251   	{
;;;1252   		LCD_DispStr(_pLabel->Left, _pLabel->Top, _pLabel->pCaption, _pLabel->Font);
000014  88a1              LDRH     r1,[r4,#4]
000016  8860              LDRH     r0,[r4,#2]
000018  e9d43203          LDRD     r3,r2,[r4,#0xc]
00001c  f7fffffe          BL       LCD_DispStr
;;;1253   		_pLabel->MaxLen = NewLen;
000020  8166              STRH     r6,[r4,#0xa]
000022  e01b              B        |L20.92|
                  |L20.36|
;;;1254   	}
;;;1255   	else
;;;1256   	{
;;;1257   		for (i = 0; i < NewLen; i++)
000024  2500              MOVS     r5,#0
000026  e005              B        |L20.52|
                  |L20.40|
;;;1258   		{
;;;1259   			dispbuf[i] = _pLabel->pCaption[i];
000028  6920              LDR      r0,[r4,#0x10]
00002a  5d40              LDRB     r0,[r0,r5]
00002c  a901              ADD      r1,sp,#4
00002e  5548              STRB     r0,[r1,r5]
000030  1c68              ADDS     r0,r5,#1              ;1257
000032  b285              UXTH     r5,r0                 ;1257
                  |L20.52|
000034  42b5              CMP      r5,r6                 ;1257
000036  dbf7              BLT      |L20.40|
;;;1260   		}
;;;1261   		for (; i < _pLabel->MaxLen; i++)
000038  e004              B        |L20.68|
                  |L20.58|
;;;1262   		{
;;;1263   			dispbuf[i] = ' ';		/* 末尾填充空格 */
00003a  2020              MOVS     r0,#0x20
00003c  a901              ADD      r1,sp,#4
00003e  5548              STRB     r0,[r1,r5]
000040  1c68              ADDS     r0,r5,#1              ;1261
000042  b285              UXTH     r5,r0                 ;1261
                  |L20.68|
000044  8960              LDRH     r0,[r4,#0xa]          ;1261
000046  42a8              CMP      r0,r5                 ;1261
000048  dcf7              BGT      |L20.58|
;;;1264   		}
;;;1265   		dispbuf[i] = 0;
00004a  2000              MOVS     r0,#0
00004c  a901              ADD      r1,sp,#4
00004e  5548              STRB     r0,[r1,r5]
;;;1266   		LCD_DispStr(_pLabel->Left, _pLabel->Top, dispbuf, _pLabel->Font);
000050  88a1              LDRH     r1,[r4,#4]
000052  8860              LDRH     r0,[r4,#2]
000054  aa01              ADD      r2,sp,#4
000056  68e3              LDR      r3,[r4,#0xc]
000058  f7fffffe          BL       LCD_DispStr
                  |L20.92|
;;;1267   	}
;;;1268   #else
;;;1269   	if (g_ChipID == IC_8875)
;;;1270   	{
;;;1271   		RA8875_SetFont(_pLabel->Font->FontCode, 0, 0);	/* 设置32点阵字体，行间距=0，字间距=0 */
;;;1272   
;;;1273   		RA8875_SetBackColor(_pLabel->Font->BackColor);
;;;1274   		RA8875_SetFrontColor(_pLabel->Font->FrontColor);
;;;1275   
;;;1276   		RA8875_DispStr(_pLabel->Left, _pLabel->Top, _pLabel->Caption);
;;;1277   	}
;;;1278   	else
;;;1279   	{
;;;1280   
;;;1281   	}
;;;1282   #endif
;;;1283   }
00005c  b041              ADD      sp,sp,#0x104
00005e  bdf0              POP      {r4-r7,pc}
;;;1284   
                          ENDP


                          AREA ||i.LCD_DrawLine||, CODE, READONLY, ALIGN=1

                  LCD_DrawLine PROC
;;;773    */
;;;774    void LCD_DrawLine(uint16_t _usX1 , uint16_t _usY1 , uint16_t _usX2 , uint16_t _usY2 , uint16_t _usColor)
000000  e92d43f8          PUSH     {r3-r9,lr}
;;;775    {
000004  4604              MOV      r4,r0
000006  460d              MOV      r5,r1
000008  4616              MOV      r6,r2
00000a  461f              MOV      r7,r3
00000c  f8dd8020          LDR      r8,[sp,#0x20]
;;;776    	ST7789V_DrawLine(_usX1 , _usY1 , _usX2, _usY2 , _usColor);
000010  463b              MOV      r3,r7
000012  4632              MOV      r2,r6
000014  4629              MOV      r1,r5
000016  4620              MOV      r0,r4
000018  f8cd8000          STR      r8,[sp,#0]
00001c  f7fffffe          BL       ST7789V_DrawLine
;;;777    }
000020  e8bd83f8          POP      {r3-r9,pc}
;;;778    
                          ENDP


                          AREA ||i.LCD_DrawPoints||, CODE, READONLY, ALIGN=1

                  LCD_DrawPoints PROC
;;;802    */
;;;803    void LCD_DrawPoints(uint16_t *x, uint16_t *y, uint16_t _usSize, uint16_t _usColor)
000000  e92d43f8          PUSH     {r3-r9,lr}
;;;804    {
000004  4605              MOV      r5,r0
000006  460e              MOV      r6,r1
000008  4617              MOV      r7,r2
00000a  4698              MOV      r8,r3
;;;805    	uint16_t i;
;;;806    
;;;807    	for (i = 0 ; i < _usSize - 1; i++)
00000c  2400              MOVS     r4,#0
00000e  e00f              B        |L22.48|
                  |L22.16|
;;;808    	{
;;;809    		LCD_DrawLine(x[i], y[i], x[i + 1], y[i + 1], _usColor);
000010  f1040c01          ADD      r12,r4,#1
000014  f8cd8000          STR      r8,[sp,#0]
000018  f836301c          LDRH     r3,[r6,r12,LSL #1]
00001c  f835201c          LDRH     r2,[r5,r12,LSL #1]
000020  f8361014          LDRH     r1,[r6,r4,LSL #1]
000024  f8350014          LDRH     r0,[r5,r4,LSL #1]
000028  f7fffffe          BL       LCD_DrawLine
00002c  1c60              ADDS     r0,r4,#1              ;807
00002e  b284              UXTH     r4,r0                 ;807
                  |L22.48|
000030  1e78              SUBS     r0,r7,#1              ;807
000032  42a0              CMP      r0,r4                 ;807
000034  dcec              BGT      |L22.16|
;;;810    	}
;;;811    }
000036  e8bd83f8          POP      {r3-r9,pc}
;;;812    
                          ENDP


                          AREA ||i.LCD_DrawRect||, CODE, READONLY, ALIGN=1

                  LCD_DrawRect PROC
;;;823    */
;;;824    void LCD_DrawRect(uint16_t _usX, uint16_t _usY, uint16_t _usHeight, uint16_t _usWidth, uint16_t _usColor)
000000  e92d43f8          PUSH     {r3-r9,lr}
;;;825    {
000004  4604              MOV      r4,r0
000006  460d              MOV      r5,r1
000008  4616              MOV      r6,r2
00000a  461f              MOV      r7,r3
00000c  f8dd8020          LDR      r8,[sp,#0x20]
;;;826    	ST7789V_DrawRect(_usX, _usY, _usHeight, _usWidth, _usColor);
000010  463b              MOV      r3,r7
000012  4632              MOV      r2,r6
000014  4629              MOV      r1,r5
000016  4620              MOV      r0,r4
000018  f8cd8000          STR      r8,[sp,#0]
00001c  f7fffffe          BL       ST7789V_DrawRect
;;;827    }
000020  e8bd83f8          POP      {r3-r9,pc}
;;;828    
                          ENDP


                          AREA ||i.LCD_DrawWin||, CODE, READONLY, ALIGN=1

                  LCD_DrawWin PROC
;;;884    */
;;;885    void LCD_DrawWin(WIN_T *_pWin)
000000  b5f8              PUSH     {r3-r7,lr}
;;;886    {
000002  4604              MOV      r4,r0
;;;887    #if 1
;;;888    	uint16_t TitleHegiht;
;;;889    
;;;890    	TitleHegiht = 20;
000004  2514              MOVS     r5,#0x14
;;;891    
;;;892    	/* 绘制窗口外框 */
;;;893    	LCD_DrawRect(_pWin->Left, _pWin->Top, _pWin->Height, _pWin->Width, WIN_BORDER_COLOR);
000006  f44f7004          MOV      r0,#0x210
00000a  9000              STR      r0,[sp,#0]
00000c  8923              LDRH     r3,[r4,#8]
00000e  88e2              LDRH     r2,[r4,#6]
000010  88a1              LDRH     r1,[r4,#4]
000012  8860              LDRH     r0,[r4,#2]
000014  f7fffffe          BL       LCD_DrawRect
;;;894    	LCD_DrawRect(_pWin->Left + 1, _pWin->Top + 1, _pWin->Height - 2, _pWin->Width - 2, WIN_BORDER_COLOR);
000018  f44f7004          MOV      r0,#0x210
00001c  9000              STR      r0,[sp,#0]
00001e  8926              LDRH     r6,[r4,#8]
000020  1eb6              SUBS     r6,r6,#2
000022  b2b3              UXTH     r3,r6
000024  88e6              LDRH     r6,[r4,#6]
000026  1eb6              SUBS     r6,r6,#2
000028  b2b2              UXTH     r2,r6
00002a  88a6              LDRH     r6,[r4,#4]
00002c  1c76              ADDS     r6,r6,#1
00002e  b2b1              UXTH     r1,r6
000030  8866              LDRH     r6,[r4,#2]
000032  1c76              ADDS     r6,r6,#1
000034  b2b0              UXTH     r0,r6
000036  f7fffffe          BL       LCD_DrawRect
;;;895    
;;;896    	/* 窗口标题栏 */
;;;897    	LCD_Fill_Rect(_pWin->Left + 2, _pWin->Top + 2, TitleHegiht, _pWin->Width - 4, WIN_TITLE_COLOR);
00003a  f244203f          MOV      r0,#0x423f
00003e  9000              STR      r0,[sp,#0]
000040  8922              LDRH     r2,[r4,#8]
000042  1f12              SUBS     r2,r2,#4
000044  b293              UXTH     r3,r2
000046  88a2              LDRH     r2,[r4,#4]
000048  1c92              ADDS     r2,r2,#2
00004a  b291              UXTH     r1,r2
00004c  8862              LDRH     r2,[r4,#2]
00004e  1c92              ADDS     r2,r2,#2
000050  b290              UXTH     r0,r2
000052  462a              MOV      r2,r5
000054  f7fffffe          BL       LCD_Fill_Rect
;;;898    
;;;899    	/* 窗体填充 */
;;;900    	LCD_Fill_Rect(_pWin->Left + 2, _pWin->Top + TitleHegiht + 2, _pWin->Height - 4 - TitleHegiht,
000058  f24b50b6          MOV      r0,#0xb5b6
00005c  9000              STR      r0,[sp,#0]
00005e  8926              LDRH     r6,[r4,#8]
000060  1f36              SUBS     r6,r6,#4
000062  b2b3              UXTH     r3,r6
000064  88e6              LDRH     r6,[r4,#6]
000066  1f36              SUBS     r6,r6,#4
000068  1b76              SUBS     r6,r6,r5
00006a  b2b2              UXTH     r2,r6
00006c  88a6              LDRH     r6,[r4,#4]
00006e  442e              ADD      r6,r6,r5
000070  1cb6              ADDS     r6,r6,#2
000072  b2b1              UXTH     r1,r6
000074  8866              LDRH     r6,[r4,#2]
000076  1cb6              ADDS     r6,r6,#2
000078  b2b0              UXTH     r0,r6
00007a  f7fffffe          BL       LCD_Fill_Rect
;;;901    		_pWin->Width - 4, WIN_BODY_COLOR);
;;;902    
;;;903    	LCD_DispStr(_pWin->Left + 3, _pWin->Top + 2, _pWin->pCaption, _pWin->Font);
00007e  88a6              LDRH     r6,[r4,#4]
000080  1cb6              ADDS     r6,r6,#2
000082  b2b1              UXTH     r1,r6
000084  8866              LDRH     r6,[r4,#2]
000086  1cf6              ADDS     r6,r6,#3
000088  b2b0              UXTH     r0,r6
00008a  e9d43203          LDRD     r3,r2,[r4,#0xc]
00008e  f7fffffe          BL       LCD_DispStr
;;;904    #else
;;;905    	if (g_ChipID == IC_8875)
;;;906    	{
;;;907    		uint16_t TitleHegiht;
;;;908    
;;;909    		TitleHegiht = 28;
;;;910    
;;;911    		/* 绘制窗口外框 */
;;;912    		RA8875_DrawRect(_pWin->Left, _pWin->Top, _pWin->Height, _pWin->Width, WIN_BORDER_COLOR);
;;;913    		RA8875_DrawRect(_pWin->Left + 1, _pWin->Top + 1, _pWin->Height - 2, _pWin->Width - 2, WIN_BORDER_COLOR);
;;;914    
;;;915    		/* 窗口标题栏 */
;;;916    		RA8875_FillRect(_pWin->Left + 2, _pWin->Top + 2, TitleHegiht, _pWin->Width - 4, WIN_TITLE_COLOR);
;;;917    
;;;918    		/* 窗体填充 */
;;;919    		RA8875_FillRect(_pWin->Left + 2, _pWin->Top + TitleHegiht + 2, _pWin->Height - 4 - TitleHegiht, _pWin->Width - 4, WIN_BODY_COLOR);
;;;920    
;;;921    		//RA8875_SetFont(_pWin->Font.FontCode, 0, 0);
;;;922    		RA8875_SetFont(RA_FONT_24, 0, 0);
;;;923    
;;;924    		RA8875_SetBackColor(WIN_TITLE_COLOR);
;;;925    		RA8875_SetFrontColor(WIN_CAPTION_COLOR);
;;;926    		RA8875_DispStr(_pWin->Left + 3, _pWin->Top + 2, _pWin->Caption);
;;;927    	}
;;;928    	else
;;;929    	{
;;;930    		;
;;;931    	}
;;;932    #endif
;;;933    }
000092  bdf8              POP      {r3-r7,pc}
;;;934    
                          ENDP


                          AREA ||i.LCD_Draw_HColorLine||, CODE, READONLY, ALIGN=1

                  LCD_Draw_HColorLine PROC
;;;787    
;;;788    void LCD_Draw_HColorLine(uint16_t _usX1, uint16_t _usY1, uint16_t _usWidth, const uint16_t * _pColor)
000000  e92d41f0          PUSH     {r4-r8,lr}
;;;789    {
000004  4604              MOV      r4,r0
000006  460d              MOV      r5,r1
000008  4616              MOV      r6,r2
00000a  461f              MOV      r7,r3
;;;790            ST7789V_DrawHColorLine(_usX1, _usY1, _usWidth, _pColor);
00000c  463b              MOV      r3,r7
00000e  4632              MOV      r2,r6
000010  4629              MOV      r1,r5
000012  4620              MOV      r0,r4
000014  f7fffffe          BL       ST7789V_DrawHColorLine
;;;791    }
000018  e8bd81f0          POP      {r4-r8,pc}
;;;792    
                          ENDP


                          AREA ||i.LCD_Draw_HLine||, CODE, READONLY, ALIGN=1

                  LCD_Draw_HLine PROC
;;;782    }
;;;783    void LCD_Draw_HLine(uint16_t _usX1, uint16_t _usY1, uint16_t _usX2, uint16_t _usColor)
000000  e92d41f0          PUSH     {r4-r8,lr}
;;;784    {
000004  4604              MOV      r4,r0
000006  460d              MOV      r5,r1
000008  4616              MOV      r6,r2
00000a  461f              MOV      r7,r3
;;;785            ST7789V_DrawHLine(_usX1, _usY1, _usX2, _usColor);
00000c  463b              MOV      r3,r7
00000e  4632              MOV      r2,r6
000010  4629              MOV      r1,r5
000012  4620              MOV      r0,r4
000014  f7fffffe          BL       ST7789V_DrawHLine
;;;786    }
000018  e8bd81f0          POP      {r4-r8,pc}
;;;787    
                          ENDP


                          AREA ||i.LCD_Draw_VLine||, CODE, READONLY, ALIGN=1

                  LCD_Draw_VLine PROC
;;;778    
;;;779    void LCD_Draw_VLine(uint16_t _usX1, uint16_t _usY1, uint16_t _usY2, uint16_t _usColor)
000000  e92d41f0          PUSH     {r4-r8,lr}
;;;780    {
000004  4604              MOV      r4,r0
000006  460d              MOV      r5,r1
000008  4616              MOV      r6,r2
00000a  461f              MOV      r7,r3
;;;781            ST7789V_DrawVLine(_usX1, _usY1, _usY2, _usColor);
00000c  463b              MOV      r3,r7
00000e  4632              MOV      r2,r6
000010  4629              MOV      r1,r5
000012  4620              MOV      r0,r4
000014  f7fffffe          BL       ST7789V_DrawVLine
;;;782    }
000018  e8bd81f0          POP      {r4-r8,pc}
;;;783    void LCD_Draw_HLine(uint16_t _usX1, uint16_t _usY1, uint16_t _usX2, uint16_t _usColor)
                          ENDP


                          AREA ||i.LCD_Fill_Rect||, CODE, READONLY, ALIGN=1

                  LCD_Fill_Rect PROC
;;;839    */
;;;840    void LCD_Fill_Rect(uint16_t _usX, uint16_t _usY, uint16_t _usHeight, uint16_t _usWidth, uint16_t _usColor)
000000  e92d43f8          PUSH     {r3-r9,lr}
;;;841    {
000004  4604              MOV      r4,r0
000006  460d              MOV      r5,r1
000008  4616              MOV      r6,r2
00000a  461f              MOV      r7,r3
00000c  f8dd8020          LDR      r8,[sp,#0x20]
;;;842    	ST7789V_FillRect(_usX, _usY, _usHeight, _usWidth, _usColor);
000010  463b              MOV      r3,r7
000012  4632              MOV      r2,r6
000014  4629              MOV      r1,r5
000016  4620              MOV      r0,r4
000018  f8cd8000          STR      r8,[sp,#0]
00001c  f7fffffe          BL       ST7789V_FillRect
;;;843    }
000020  e8bd83f8          POP      {r3-r9,pc}
;;;844    
                          ENDP


                          AREA ||i.LCD_GetBackLight||, CODE, READONLY, ALIGN=2

                  LCD_GetBackLight PROC
;;;1742   */
;;;1743   uint8_t LCD_GetBackLight(void)
000000  4801              LDR      r0,|L29.8|
;;;1744   {
;;;1745   	return s_ucBright;
000002  7800              LDRB     r0,[r0,#0]  ; s_ucBright
;;;1746   }
000004  4770              BX       lr
;;;1747   /*
                          ENDP

000006  0000              DCW      0x0000
                  |L29.8|
                          DCD      s_ucBright

                          AREA ||i.LCD_GetChipDescribe||, CODE, READONLY, ALIGN=2

                  LCD_GetChipDescribe PROC
;;;140    */
;;;141    void LCD_GetChipDescribe(char *_str)
000000  b510              PUSH     {r4,lr}
;;;142    {
000002  4604              MOV      r4,r0
;;;143    	switch (g_ChipID)
000004  481b              LDR      r0,|L30.116|
000006  8801              LDRH     r1,[r0,#0]  ; g_ChipID
000008  f2454220          MOV      r2,#0x5420
00000c  1a88              SUBS     r0,r1,r2
00000e  4291              CMP      r1,r2
000010  d010              BEQ      |L30.52|
000012  dc06              BGT      |L30.34|
000014  2975              CMP      r1,#0x75
000016  d01c              BEQ      |L30.82|
000018  f46f4080          MVN      r0,#0x4000
00001c  4408              ADD      r0,r0,r1
00001e  bb10              CBNZ     r0,|L30.102|
000020  e00d              B        |L30.62|
                  |L30.34|
000022  f5a04080          SUB      r0,r0,#0x4000
000026  3868              SUBS     r0,r0,#0x68
000028  b1c0              CBZ      r0,|L30.92|
00002a  f46f5102          MVN      r1,#0x2080
00002e  4408              ADD      r0,r0,r1
000030  b9c8              CBNZ     r0,|L30.102|
000032  e009              B        |L30.72|
                  |L30.52|
;;;144    	{
;;;145    		case IC_5420:
;;;146    			strcpy(_str, CHIP_STR_5420);
000034  a110              ADR      r1,|L30.120|
000036  4620              MOV      r0,r4
000038  f7fffffe          BL       strcpy
;;;147    			break;
00003c  e018              B        |L30.112|
                  |L30.62|
;;;148    
;;;149    		case IC_4001:
;;;150    			strcpy(_str, CHIP_STR_4001);
00003e  a111              ADR      r1,|L30.132|
000040  4620              MOV      r0,r4
000042  f7fffffe          BL       strcpy
;;;151    			break;
000046  e013              B        |L30.112|
                  |L30.72|
;;;152    
;;;153    		case IC_61509:
;;;154    			strcpy(_str, CHIP_STR_61509);
000048  a111              ADR      r1,|L30.144|
00004a  4620              MOV      r0,r4
00004c  f7fffffe          BL       strcpy
;;;155    			break;
000050  e00e              B        |L30.112|
                  |L30.82|
;;;156    
;;;157    		case IC_8875:
;;;158    			strcpy(_str, CHIP_STR_8875);
000052  a111              ADR      r1,|L30.152|
000054  4620              MOV      r0,r4
000056  f7fffffe          BL       strcpy
;;;159    			break;
00005a  e009              B        |L30.112|
                  |L30.92|
;;;160    
;;;161    		case IC_9488:
;;;162    			strcpy(_str, CHIP_STR_9488);
00005c  a110              ADR      r1,|L30.160|
00005e  4620              MOV      r0,r4
000060  f7fffffe          BL       strcpy
;;;163    			break;
000064  e004              B        |L30.112|
                  |L30.102|
;;;164    
;;;165    		default:
;;;166    			strcpy(_str, "Unknow");
000066  a110              ADR      r1,|L30.168|
000068  4620              MOV      r0,r4
00006a  f7fffffe          BL       strcpy
;;;167    			break;
00006e  bf00              NOP      
                  |L30.112|
000070  bf00              NOP                            ;147
;;;168    	}
;;;169    }
000072  bd10              POP      {r4,pc}
;;;170    
                          ENDP

                  |L30.116|
                          DCD      g_ChipID
                  |L30.120|
000078  53504644          DCB      "SPFD5420A",0
00007c  35343230
000080  4100    
000082  00                DCB      0
000083  00                DCB      0
                  |L30.132|
000084  4f544d34          DCB      "OTM4001A",0
000088  30303141
00008c  00      
00008d  00                DCB      0
00008e  00                DCB      0
00008f  00                DCB      0
                  |L30.144|
000090  52363135          DCB      "R61509V",0
000094  30395600
                  |L30.152|
000098  52413838          DCB      "RA8875",0
00009c  373500  
00009f  00                DCB      0
                  |L30.160|
0000a0  494c4939          DCB      "ILI9488",0
0000a4  34383800
                  |L30.168|
0000a8  556e6b6e          DCB      "Unknow",0
0000ac  6f7700  
0000af  00                DCB      0

                          AREA ||i.LCD_GetFontHeight||, CODE, READONLY, ALIGN=1

                  LCD_GetFontHeight PROC
;;;298    */
;;;299    uint16_t LCD_GetFontHeight(FONT_T *_tFont)
000000  4601              MOV      r1,r0
;;;300    {
;;;301    	uint16_t height = 16;
000002  2010              MOVS     r0,#0x10
;;;302    
;;;303    	switch (_tFont->FontCode)
000004  780a              LDRB     r2,[r1,#0]
000006  2a07              CMP      r2,#7
000008  d210              BCS      |L31.44|
00000a  e8dff002          TBB      [pc,r2]
00000e  0406              DCB      0x04,0x06
000010  0a0c0709          DCB      0x0a,0x0c,0x07,0x09
000014  0d00              DCB      0x0d,0x00
;;;304    	{
;;;305    		case FC_ST_12:
;;;306    			height = 12;
000016  200c              MOVS     r0,#0xc
;;;307    			break;
000018  e008              B        |L31.44|
;;;308    
;;;309    		case FC_ST_16:
;;;310    		case FC_RA8875_16:			
00001a  bf00              NOP      
;;;311    			height = 16;
00001c  2010              MOVS     r0,#0x10
;;;312    			break;
00001e  e005              B        |L31.44|
;;;313    			
;;;314    		case FC_RA8875_24:			
;;;315    		case FC_ST_24:
000020  bf00              NOP      
;;;316    			height = 24;
000022  2018              MOVS     r0,#0x18
;;;317    			break;
000024  e002              B        |L31.44|
;;;318    			
;;;319    		case FC_ST_32:
;;;320    		case FC_RA8875_32:	
000026  bf00              NOP      
;;;321    			height = 32;
000028  2020              MOVS     r0,#0x20
;;;322    			break;			
00002a  bf00              NOP      
                  |L31.44|
00002c  bf00              NOP                            ;307
;;;323    	}
;;;324    	return height;
;;;325    }
00002e  4770              BX       lr
;;;326    
                          ENDP


                          AREA ||i.LCD_GetFontWidth||, CODE, READONLY, ALIGN=1

                  LCD_GetFontWidth PROC
;;;261    */
;;;262    uint16_t LCD_GetFontWidth(FONT_T *_tFont)
000000  4601              MOV      r1,r0
;;;263    {
;;;264    	uint16_t font_width = 16;
000002  2010              MOVS     r0,#0x10
;;;265    
;;;266    	switch (_tFont->FontCode)
000004  780a              LDRB     r2,[r1,#0]
000006  2a07              CMP      r2,#7
000008  d210              BCS      |L32.44|
00000a  e8dff002          TBB      [pc,r2]
00000e  0406              DCB      0x04,0x06
000010  0a0c0709          DCB      0x0a,0x0c,0x07,0x09
000014  0d00              DCB      0x0d,0x00
;;;267    	{
;;;268    		case FC_ST_12:
;;;269    			font_width = 12;
000016  200c              MOVS     r0,#0xc
;;;270    			break;
000018  e008              B        |L32.44|
;;;271    
;;;272    		case FC_ST_16:
;;;273    		case FC_RA8875_16:			
00001a  bf00              NOP      
;;;274    			font_width = 16;
00001c  2010              MOVS     r0,#0x10
;;;275    			break;
00001e  e005              B        |L32.44|
;;;276    			
;;;277    		case FC_RA8875_24:			
;;;278    		case FC_ST_24:
000020  bf00              NOP      
;;;279    			font_width = 24;
000022  2018              MOVS     r0,#0x18
;;;280    			break;
000024  e002              B        |L32.44|
;;;281    			
;;;282    		case FC_ST_32:
;;;283    		case FC_RA8875_32:	
000026  bf00              NOP      
;;;284    			font_width = 32;
000028  2020              MOVS     r0,#0x20
;;;285    			break;			
00002a  bf00              NOP      
                  |L32.44|
00002c  bf00              NOP                            ;270
;;;286    	}
;;;287    	return font_width;
;;;288    }
00002e  4770              BX       lr
;;;289    
                          ENDP


                          AREA ||i.LCD_GetHeight||, CODE, READONLY, ALIGN=2

                  LCD_GetHeight PROC
;;;178    */
;;;179    uint16_t LCD_GetHeight(void)
000000  4801              LDR      r0,|L33.8|
;;;180    {
;;;181    	return g_LcdHeight;
000002  8800              LDRH     r0,[r0,#0]  ; g_LcdHeight
;;;182    }
000004  4770              BX       lr
;;;183    
                          ENDP

000006  0000              DCW      0x0000
                  |L33.8|
                          DCD      g_LcdHeight

                          AREA ||i.LCD_GetPixel||, CODE, READONLY, ALIGN=1

                  LCD_GetPixel PROC
;;;753    */
;;;754    uint16_t LCD_GetPixel(uint16_t _usX, uint16_t _usY)
000000  b570              PUSH     {r4-r6,lr}
;;;755    {
000002  4604              MOV      r4,r0
000004  460d              MOV      r5,r1
;;;756    	uint16_t usRGB;
;;;757    
;;;758    	usRGB = ST7789V_GetPixel(_usX, _usY);
000006  4629              MOV      r1,r5
000008  4620              MOV      r0,r4
00000a  f7fffffe          BL       ST7789V_GetPixel
00000e  4606              MOV      r6,r0
;;;759    
;;;760    	return usRGB;
000010  4630              MOV      r0,r6
;;;761    }
000012  bd70              POP      {r4-r6,pc}
;;;762    
                          ENDP


                          AREA ||i.LCD_GetStrWidth||, CODE, READONLY, ALIGN=1

                  LCD_GetStrWidth PROC
;;;336    */
;;;337    uint16_t LCD_GetStrWidth(char *_ptr, FONT_T *_tFont)
000000  e92d47f0          PUSH     {r4-r10,lr}
;;;338    {
000004  4606              MOV      r6,r0
000006  460d              MOV      r5,r1
;;;339    	char *p = _ptr;
000008  4634              MOV      r4,r6
;;;340    	uint16_t width = 0;
00000a  2700              MOVS     r7,#0
;;;341    	uint8_t code1, code2;
;;;342    	uint16_t font_width;
;;;343    
;;;344    	font_width = LCD_GetFontWidth(_tFont);
00000c  4628              MOV      r0,r5
00000e  f7fffffe          BL       LCD_GetFontWidth
000012  4682              MOV      r10,r0
;;;345    
;;;346    	while (*p != 0)
000014  e030              B        |L35.120|
                  |L35.22|
;;;347    	{
;;;348    		code1 = *p;	/* 读取字符串数据， 该数据可能是ascii代码，也可能汉字代码的高字节 */
000016  f8949000          LDRB     r9,[r4,#0]
;;;349    		if (code1 < 0x80)	/* ASCII */
00001a  f1b90f80          CMP      r9,#0x80
00001e  da1b              BGE      |L35.88|
;;;350    		{
;;;351    			switch(_tFont->FontCode)
000020  7828              LDRB     r0,[r5,#0]
000022  2807              CMP      r0,#7
000024  d214              BCS      |L35.80|
000026  e8dff000          TBB      [pc,r0]
00002a  070a              DCB      0x07,0x0a
00002c  0d100405          DCB      0x0d,0x10,0x04,0x05
000030  0600              DCB      0x06,0x00
;;;352    			{
;;;353    				case FC_RA8875_16:
;;;354    					//font_width = g_RA8875_Ascii16_width[code1 - 0x20];
;;;355    					break;
000032  e010              B        |L35.86|
;;;356    				
;;;357    				case FC_RA8875_24:
;;;358    					//font_width = g_RA8875_Ascii24_width[code1 - 0x20];
;;;359    					break;
000034  e00f              B        |L35.86|
;;;360    				
;;;361    				case FC_RA8875_32:
;;;362    					//font_width = g_RA8875_Ascii32_width[code1 - 0x20];
;;;363    					break;
000036  e00e              B        |L35.86|
;;;364    				
;;;365    				case FC_ST_12:
;;;366    					font_width = 6;
000038  f04f0a06          MOV      r10,#6
;;;367    					break;
00003c  e00b              B        |L35.86|
;;;368    
;;;369    				case FC_ST_16:		
;;;370    					font_width = 8;
00003e  f04f0a08          MOV      r10,#8
;;;371    					break;
000042  e008              B        |L35.86|
;;;372    					
;;;373    				case FC_ST_24:			
;;;374    					font_width = 12;
000044  f04f0a0c          MOV      r10,#0xc
;;;375    					break;
000048  e005              B        |L35.86|
;;;376    					
;;;377    				case FC_ST_32:
;;;378    					font_width = 16;
00004a  f04f0a10          MOV      r10,#0x10
;;;379    					break;
00004e  e002              B        |L35.86|
                  |L35.80|
;;;380    				
;;;381    				default:
;;;382    					font_width = 8;
000050  f04f0a08          MOV      r10,#8
;;;383    					break;					
000054  bf00              NOP      
                  |L35.86|
000056  e00b              B        |L35.112|
                  |L35.88|
;;;384    			}
;;;385    			
;;;386    		}
;;;387    		else	/* 汉字 */
;;;388    		{
;;;389    			code2 = *++p;
000058  1c60              ADDS     r0,r4,#1
00005a  4604              MOV      r4,r0
00005c  f8908000          LDRB     r8,[r0,#0]
;;;390    			if (code2 == 0)
000060  f1b80f00          CMP      r8,#0
000064  d100              BNE      |L35.104|
;;;391    			{
;;;392    				break;
000066  e00a              B        |L35.126|
                  |L35.104|
;;;393    			}
;;;394    			font_width = LCD_GetFontWidth(_tFont);
000068  4628              MOV      r0,r5
00006a  f7fffffe          BL       LCD_GetFontWidth
00006e  4682              MOV      r10,r0
                  |L35.112|
;;;395    			
;;;396    		}
;;;397    		width += font_width;
000070  eb07000a          ADD      r0,r7,r10
000074  b287              UXTH     r7,r0
;;;398    		p++;
000076  1c64              ADDS     r4,r4,#1
                  |L35.120|
000078  7820              LDRB     r0,[r4,#0]            ;346
00007a  2800              CMP      r0,#0                 ;346
00007c  d1cb              BNE      |L35.22|
                  |L35.126|
00007e  bf00              NOP                            ;392
;;;399    	}
;;;400    
;;;401    	return width;
000080  4638              MOV      r0,r7
;;;402    }
000082  e8bd87f0          POP      {r4-r10,pc}
;;;403    
                          ENDP


                          AREA ||i.LCD_GetWidth||, CODE, READONLY, ALIGN=2

                  LCD_GetWidth PROC
;;;191    */
;;;192    uint16_t LCD_GetWidth(void)
000000  4801              LDR      r0,|L36.8|
;;;193    {
;;;194    	return g_LcdWidth;
000002  8800              LDRH     r0,[r0,#0]  ; g_LcdWidth
;;;195    }
000004  4770              BX       lr
;;;196    
                          ENDP

000006  0000              DCW      0x0000
                  |L36.8|
                          DCD      g_LcdWidth

                          AREA ||i.LCD_HardReset||, CODE, READONLY, ALIGN=2

                  LCD_HardReset PROC
;;;109    */
;;;110    void LCD_HardReset(void)
000000  b51c              PUSH     {r2-r4,lr}
;;;111    {
;;;112    	GPIO_InitTypeDef GPIO_InitStructure;
;;;113    
;;;114    	/* 使能 GPIO时钟 */
;;;115    	RCC_AHB1PeriphClockCmd(RCC_AHB1Periph_GPIOA, ENABLE);
000002  2101              MOVS     r1,#1
000004  4608              MOV      r0,r1
000006  f7fffffe          BL       RCC_AHB1PeriphClockCmd
;;;116    	
;;;117    	/* 配置背光GPIO为推挽输出模式 */
;;;118    	GPIO_InitStructure.GPIO_Pin = GPIO_Pin_8;
00000a  f44f7080          MOV      r0,#0x100
00000e  9000              STR      r0,[sp,#0]
;;;119    	GPIO_InitStructure.GPIO_Mode = GPIO_Mode_OUT;
000010  2001              MOVS     r0,#1
000012  f88d0004          STRB     r0,[sp,#4]
;;;120    	GPIO_InitStructure.GPIO_Speed = GPIO_Speed_100MHz;
000016  2003              MOVS     r0,#3
000018  f88d0005          STRB     r0,[sp,#5]
;;;121    	GPIO_InitStructure.GPIO_OType = GPIO_OType_PP;
00001c  2000              MOVS     r0,#0
00001e  f88d0006          STRB     r0,[sp,#6]
;;;122    	GPIO_InitStructure.GPIO_PuPd  = GPIO_PuPd_NOPULL;
000022  f88d0007          STRB     r0,[sp,#7]
;;;123    	GPIO_Init(GPIOA, &GPIO_InitStructure);
000026  4669              MOV      r1,sp
000028  480d              LDR      r0,|L37.96|
00002a  f7fffffe          BL       GPIO_Init
;;;124    
;;;125    	GPIO_SetBits(GPIOA, GPIO_Pin_8);
00002e  f44f7180          MOV      r1,#0x100
000032  480b              LDR      r0,|L37.96|
000034  f7fffffe          BL       GPIO_SetBits
;;;126    	bsp_DelayMS(1);
000038  2001              MOVS     r0,#1
00003a  f7fffffe          BL       bsp_DelayMS
;;;127    	GPIO_ResetBits(GPIOA, GPIO_Pin_8);
00003e  f44f7180          MOV      r1,#0x100
000042  4807              LDR      r0,|L37.96|
000044  f7fffffe          BL       GPIO_ResetBits
;;;128    	bsp_DelayMS(10);
000048  200a              MOVS     r0,#0xa
00004a  f7fffffe          BL       bsp_DelayMS
;;;129    	GPIO_SetBits(GPIOA, GPIO_Pin_8);
00004e  f44f7180          MOV      r1,#0x100
000052  4803              LDR      r0,|L37.96|
000054  f7fffffe          BL       GPIO_SetBits
;;;130     	bsp_DelayMS(120);
000058  2078              MOVS     r0,#0x78
00005a  f7fffffe          BL       bsp_DelayMS
;;;131    }
00005e  bd1c              POP      {r2-r4,pc}
;;;132    
                          ENDP

                  |L37.96|
                          DCD      0x40020000

                          AREA ||i.LCD_InitButton||, CODE, READONLY, ALIGN=1

                  LCD_InitButton PROC
;;;1823   */
;;;1824   void LCD_InitButton(BUTTON_T *_btn, uint16_t _x, uint16_t _y, uint16_t _h, uint16_t _w, char *_pCaption, FONT_T *_pFont)
000000  b5f0              PUSH     {r4-r7,lr}
;;;1825   {
000002  ac05              ADD      r4,sp,#0x14
000004  cc70              LDM      r4,{r4-r6}
;;;1826   	_btn->Left = _x;
000006  8041              STRH     r1,[r0,#2]
;;;1827   	_btn->Top = _y;
000008  8082              STRH     r2,[r0,#4]
;;;1828   	_btn->Height = _h;
00000a  80c3              STRH     r3,[r0,#6]
;;;1829   	_btn->Width = _w;
00000c  8104              STRH     r4,[r0,#8]
;;;1830   	_btn->pCaption = _pCaption;	
00000e  6105              STR      r5,[r0,#0x10]
;;;1831   	_btn->Font = _pFont;
000010  60c6              STR      r6,[r0,#0xc]
;;;1832   	_btn->Focus = 0;
000012  2700              MOVS     r7,#0
000014  7507              STRB     r7,[r0,#0x14]
;;;1833   }
000016  bdf0              POP      {r4-r7,pc}
;;;1834   
                          ENDP


                          AREA ||i.LCD_InitHard||, CODE, READONLY, ALIGN=2

                  LCD_InitHard PROC
;;;73     */
;;;74     void LCD_InitHard(void)
000000  b510              PUSH     {r4,lr}
;;;75     {
;;;76     	/* 配置LCD控制口线GPIO */
;;;77     	LCD_CtrlLinesConfig();
000002  f7fffffe          BL       LCD_CtrlLinesConfig
;;;78     
;;;79     	LCD_HardReset();	/* 硬件复位 （STM32-V5 无需），针对其他GPIO控制LCD复位的产品 */
000006  f7fffffe          BL       LCD_HardReset
;;;80     	
;;;81     	/* FSMC重置后必须加延迟才能访问总线设备  */
;;;82     	bsp_DelayMS(20);
00000a  2014              MOVS     r0,#0x14
00000c  f7fffffe          BL       bsp_DelayMS
;;;83     
;;;84     	g_ChipID = ST7789V_InitHard();
000010  f7fffffe          BL       ST7789V_InitHard
000014  4908              LDR      r1,|L39.56|
000016  8008              STRH     r0,[r1,#0]
;;;85         if(g_ChipID == IC_7789)
000018  4608              MOV      r0,r1
00001a  8800              LDRH     r0,[r0,#0]  ; g_ChipID
00001c  f2477189          MOV      r1,#0x7789
000020  4288              CMP      r0,r1
000022  d108              BNE      |L39.54|
;;;86         {
;;;87             LCD_SetDirection(2);
000024  2002              MOVS     r0,#2
000026  f7fffffe          BL       LCD_SetDirection
;;;88     
;;;89             LCD_ClrScr(CL_BLACK);	/* 清屏，显示全黑 */
00002a  2000              MOVS     r0,#0
00002c  f7fffffe          BL       LCD_ClrScr
;;;90     
;;;91             LCD_SetBackLight(BRIGHT_MAX);	 /* 打开背光，设置为缺省亮度 */
000030  2064              MOVS     r0,#0x64
000032  f7fffffe          BL       LCD_SetBackLight
                  |L39.54|
;;;92     
;;;93     #ifdef LCD_DRIVER_TEST
;;;94             LCD_ClrScr(CL_RED);
;;;95             LCD_Fill_Rect(0, 0, 100, 50, CL_BLUE);
;;;96             LCD_DrawCircle(120,  160,  30, CL_YELLOW);
;;;97             LCD_DrawLine(0, 0, 240, 320, CL_GREEN);
;;;98     #endif
;;;99         }
;;;100    }
000036  bd10              POP      {r4,pc}
;;;101    
                          ENDP

                  |L39.56|
                          DCD      g_ChipID

                          AREA ||i.LCD_PutPixel||, CODE, READONLY, ALIGN=1

                  LCD_PutPixel PROC
;;;738    */
;;;739    void LCD_PutPixel(uint16_t _usX, uint16_t _usY, uint16_t _usColor)
000000  b570              PUSH     {r4-r6,lr}
;;;740    {
000002  4604              MOV      r4,r0
000004  460d              MOV      r5,r1
000006  4616              MOV      r6,r2
;;;741    	ST7789V_PutPixel(_usX, _usY, _usColor);
000008  4632              MOV      r2,r6
00000a  4629              MOV      r1,r5
00000c  4620              MOV      r0,r4
00000e  f7fffffe          BL       ST7789V_PutPixel
;;;742    }
000012  bd70              POP      {r4-r6,pc}
;;;743    
                          ENDP


                          AREA ||i.LCD_SetBackLight||, CODE, READONLY, ALIGN=2

                  LCD_SetBackLight PROC
;;;1727   */
;;;1728   void LCD_SetBackLight(uint8_t _bright)
000000  b510              PUSH     {r4,lr}
;;;1729   {
000002  4604              MOV      r4,r0
;;;1730   	s_ucBright =  _bright;	/* 保存背光值 */
000004  4802              LDR      r0,|L41.16|
000006  7004              STRB     r4,[r0,#0]
;;;1731   
;;;1732   	LCD_SetPwmBackLight(_bright);
000008  4620              MOV      r0,r4
00000a  f7fffffe          BL       LCD_SetPwmBackLight
;;;1733   }
00000e  bd10              POP      {r4,pc}
;;;1734   
                          ENDP

                  |L41.16|
                          DCD      s_ucBright

                          AREA ||i.LCD_SetDirection||, CODE, READONLY, ALIGN=2

                  LCD_SetDirection PROC
;;;1754   */
;;;1755   void LCD_SetDirection(uint8_t _dir)
000000  b510              PUSH     {r4,lr}
;;;1756   {
000002  4604              MOV      r4,r0
;;;1757   	g_LcdDirection =  _dir;		/* 保存在全局变量 */
000004  4802              LDR      r0,|L42.16|
000006  7004              STRB     r4,[r0,#0]
;;;1758   
;;;1759   	ST7789V_SetDirection(_dir);
000008  4620              MOV      r0,r4
00000a  f7fffffe          BL       ST7789V_SetDirection
;;;1760   }
00000e  bd10              POP      {r4,pc}
;;;1761   
                          ENDP

                  |L42.16|
                          DCD      g_LcdDirection

                          AREA ||i.LCD_SetPwmBackLight||, CODE, READONLY, ALIGN=2

                  LCD_SetPwmBackLight PROC
;;;1711   */
;;;1712   void LCD_SetPwmBackLight(uint8_t _bright)
000000  b51c              PUSH     {r2-r4,lr}
;;;1713   {
000002  4604              MOV      r4,r0
;;;1714   	/* STM32-V4开发板，PB1/TIM3_CH4/TIM8_CH3N 控制背光PWM ； 因为 TIM3用于红外解码。因此用TIM8_CH3N做背光PWM */
;;;1715   	//bsp_SetTIMOutPWM(GPIOB, GPIO_Pin_1, TIM3, 4, 100, (_bright * 10000) /255);	// TIM3_CH4
;;;1716   	bsp_SetTIMOutPWM_N(GPIOA, GPIO_Pin_2, TIM2, 3, 2000, _bright);	// TIM2_CH3N
000004  f44f60fa          MOV      r0,#0x7d0
000008  2303              MOVS     r3,#3
00000a  0682              LSLS     r2,r0,#26
00000c  2104              MOVS     r1,#4
00000e  e9cd0400          STRD     r0,r4,[sp,#0]
000012  4802              LDR      r0,|L43.28|
000014  f7fffffe          BL       bsp_SetTIMOutPWM_N
;;;1717   }
000018  bd1c              POP      {r2-r4,pc}
;;;1718   
                          ENDP

00001a  0000              DCW      0x0000
                  |L43.28|
                          DCD      0x40020000

                          AREA ||i._LCD_ReadAsciiDot||, CODE, READONLY, ALIGN=1

                  _LCD_ReadAsciiDot PROC
;;;414    */
;;;415    static void _LCD_ReadAsciiDot(uint8_t _code, uint8_t _fontcode, uint8_t *_pBuf)
000000  e92d47f0          PUSH     {r4-r10,lr}
;;;416    {
000004  4607              MOV      r7,r0
000006  460d              MOV      r5,r1
000008  4690              MOV      r8,r2
;;;417    	const uint8_t *pAscDot;
;;;418    	uint8_t font_bytes = 0;
00000a  2400              MOVS     r4,#0
;;;419    
;;;420    	pAscDot = 0;
00000c  46a2              MOV      r10,r4
;;;421    	switch (_fontcode)
00000e  2d07              CMP      r5,#7
000010  d20f              BCS      |L44.50|
000012  e8dff005          TBB      [pc,r5]
000016  0408              DCB      0x04,0x08
000018  06070a0b          DCB      0x06,0x07,0x0a,0x0b
00001c  0c00              DCB      0x0c,0x00
;;;422    	{
;;;423    		case FC_ST_12:		/* 12点阵 */
;;;424    			font_bytes = 24;
00001e  2418              MOVS     r4,#0x18
;;;425    			//pAscDot = g_Ascii12;	
;;;426    			break;
000020  e007              B        |L44.50|
;;;427    		
;;;428    		case FC_ST_24:
;;;429    		case FC_ST_32:
000022  bf00              NOP      
;;;430    		case FC_ST_16:
000024  bf00              NOP      
;;;431    			/* 缺省是16点阵 */
;;;432    			font_bytes = 32;
000026  2420              MOVS     r4,#0x20
;;;433    			//pAscDot = g_Ascii16;
;;;434    			break;
000028  e003              B        |L44.50|
;;;435    		
;;;436    		case FC_RA8875_16:
;;;437    		case FC_RA8875_24:
00002a  bf00              NOP      
;;;438    		case FC_RA8875_32:
00002c  bf00              NOP      
                  |L44.46|
;;;439    			return;
;;;440    	}	
;;;441    
;;;442    	/* 将CPU内部Flash中的ascii字符点阵复制到buf */
;;;443    	memcpy(_pBuf, &pAscDot[_code * (font_bytes / 2)], (font_bytes / 2));	
;;;444    }
00002e  e8bd87f0          POP      {r4-r10,pc}
                  |L44.50|
000032  bf00              NOP                            ;426
000034  4626              MOV      r6,r4                 ;443
000036  46a1              MOV      r9,r4                 ;443
000038  eb0470d9          ADD      r0,r4,r9,LSR #31      ;443
00003c  1040              ASRS     r0,r0,#1              ;443
00003e  fb07a100          MLA      r1,r7,r0,r10          ;443
000042  eb0470d6          ADD      r0,r4,r6,LSR #31      ;443
000046  1042              ASRS     r2,r0,#1              ;443
000048  4640              MOV      r0,r8                 ;443
00004a  f7fffffe          BL       __aeabi_memcpy
00004e  bf00              NOP      
000050  e7ed              B        |L44.46|
;;;445    
                          ENDP


                          AREA ||i._LCD_ReadHZDot||, CODE, READONLY, ALIGN=1

                  _LCD_ReadHZDot PROC
;;;456    */
;;;457    static void _LCD_ReadHZDot(uint8_t _code1, uint8_t _code2,  uint8_t _fontcode, uint8_t *_pBuf)
000000  e92d47f0          PUSH     {r4-r10,lr}
;;;458    {
000004  4604              MOV      r4,r0
000006  460d              MOV      r5,r1
000008  4616              MOV      r6,r2
00000a  4699              MOV      r9,r3
;;;459    	#ifdef USE_SMALL_FONT	/* 使用CPU 内部Flash 小字库 */
;;;460    		uint8_t *pDot;
;;;461    		uint8_t font_bytes = 0;
;;;462    		uint32_t address;
;;;463    		uint16_t m;
;;;464    
;;;465    		pDot = 0;	/* 仅仅用于避免告警 */
;;;466    		switch (_fontcode)
;;;467    		{
;;;468    			case FC_ST_12:		/* 12点阵 */
;;;469    				font_bytes = 24;
;;;470    				pDot = (uint8_t *)g_Hz12;	
;;;471    				break;
;;;472    			
;;;473    			case FC_ST_16:
;;;474    				font_bytes = 32;
;;;475    				pDot = (uint8_t *)g_Hz16;
;;;476    				break;
;;;477    	
;;;478    			case FC_ST_24:
;;;479    				font_bytes = 72;
;;;480    				pDot = (uint8_t *)g_Hz24;
;;;481    				break;			
;;;482    				
;;;483    			case FC_ST_32:	
;;;484    				font_bytes = 128;
;;;485    				pDot = (uint8_t *)g_Hz32;
;;;486    				break;						
;;;487    			
;;;488    			case FC_RA8875_16:
;;;489    			case FC_RA8875_24:
;;;490    			case FC_RA8875_32:
;;;491    				return;
;;;492    		}	
;;;493    
;;;494    		m = 0;
;;;495    		while(1)
;;;496    		{
;;;497    			address = m * (font_bytes + 2);
;;;498    			m++;
;;;499    			if ((_code1 == pDot[address + 0]) && (_code2 == pDot[address + 1]))
;;;500    			{
;;;501    				address += 2;
;;;502    				memcpy(_pBuf, &pDot[address], font_bytes);
;;;503    				break;
;;;504    			}
;;;505    			else if ((pDot[address + 0] == 0xFF) && (pDot[address + 1] == 0xFF))
;;;506    			{
;;;507    				/* 字库搜索完毕，未找到，则填充全FF */
;;;508    				memset(_pBuf, 0xFF, font_bytes);
;;;509    				break;
;;;510    			}
;;;511    		}
;;;512    	#else	/* 用全字库 */
;;;513    		uint8_t *pDot = 0;
00000c  f04f0800          MOV      r8,#0
;;;514    		uint8_t font_bytes = 0;
000010  2700              MOVS     r7,#0
;;;515    			
;;;516    		switch (_fontcode)
000012  2e07              CMP      r6,#7
000014  d211              BCS      |L45.58|
000016  e8dff006          TBB      [pc,r6]
00001a  0406              DCB      0x04,0x06
00001c  080a0c0d          DCB      0x08,0x0a,0x0c,0x0d
000020  0e00              DCB      0x0e,0x00
;;;517    		{
;;;518    			case FC_ST_12:		/* 12点阵 */
;;;519    				font_bytes = 24;
000022  2718              MOVS     r7,#0x18
;;;520    				//pDot = (uint8_t *)HZK12_ADDR;	
;;;521    				break;
000024  e009              B        |L45.58|
;;;522    			
;;;523    			case FC_ST_16:
;;;524    				font_bytes = 32;
000026  2720              MOVS     r7,#0x20
;;;525    				//pDot = (uint8_t *)HZK16_ADDR;
;;;526    				break;
000028  e007              B        |L45.58|
;;;527    	
;;;528    			case FC_ST_24:
;;;529    				font_bytes = 72;
00002a  2748              MOVS     r7,#0x48
;;;530    				//pDot = (uint8_t *)HZK24_ADDR;
;;;531    				break;			
00002c  e005              B        |L45.58|
;;;532    				
;;;533    			case FC_ST_32:	
;;;534    				font_bytes = 128;
00002e  2780              MOVS     r7,#0x80
;;;535    				//pDot = (uint8_t *)HZK32_ADDR;
;;;536    				break;						
000030  e003              B        |L45.58|
;;;537    			
;;;538    			case FC_RA8875_16:
;;;539    			case FC_RA8875_24:
000032  bf00              NOP      
;;;540    			case FC_RA8875_32:
000034  bf00              NOP      
                  |L45.54|
;;;541    				return;
;;;542    		}			
;;;543    	
;;;544    		/* 此处需要根据字库文件存放位置进行修改 */
;;;545    		if (_code1 >=0xA1 && _code1 <= 0xA9 && _code2 >=0xA1)
;;;546    		{
;;;547    			pDot += ((_code1 - 0xA1) * 94 + (_code2 - 0xA1)) * font_bytes;
;;;548    		}
;;;549    		else if (_code1 >=0xB0 && _code1 <= 0xF7 && _code2 >=0xA1)
;;;550    		{
;;;551    			pDot += ((_code1 - 0xB0) * 94 + (_code2 - 0xA1) + 846) * font_bytes;
;;;552    		}
;;;553    		memcpy(_pBuf, pDot, font_bytes);
;;;554    	#endif
;;;555    }
000036  e8bd87f0          POP      {r4-r10,pc}
                  |L45.58|
00003a  bf00              NOP                            ;521
00003c  2ca1              CMP      r4,#0xa1              ;545
00003e  db10              BLT      |L45.98|
000040  2ca9              CMP      r4,#0xa9              ;545
000042  dc0e              BGT      |L45.98|
000044  2da1              CMP      r5,#0xa1              ;545
000046  db0c              BLT      |L45.98|
000048  f1a500a1          SUB      r0,r5,#0xa1           ;547
00004c  f1a401a1          SUB      r1,r4,#0xa1           ;547
000050  ebc11201          RSB      r2,r1,r1,LSL #4       ;547
000054  eb021141          ADD      r1,r2,r1,LSL #5       ;547
000058  eb000041          ADD      r0,r0,r1,LSL #1       ;547
00005c  fb008807          MLA      r8,r0,r7,r8           ;547
000060  e013              B        |L45.138|
                  |L45.98|
000062  2cb0              CMP      r4,#0xb0              ;549
000064  db11              BLT      |L45.138|
000066  2cf7              CMP      r4,#0xf7              ;549
000068  dc0f              BGT      |L45.138|
00006a  2da1              CMP      r5,#0xa1              ;549
00006c  db0d              BLT      |L45.138|
00006e  f1a500a1          SUB      r0,r5,#0xa1           ;551
000072  f1a401b0          SUB      r1,r4,#0xb0           ;551
000076  ebc11201          RSB      r2,r1,r1,LSL #4       ;551
00007a  eb021141          ADD      r1,r2,r1,LSL #5       ;551
00007e  eb000041          ADD      r0,r0,r1,LSL #1       ;551
000082  f200304e          ADD      r0,r0,#0x34e          ;551
000086  fb008807          MLA      r8,r0,r7,r8           ;551
                  |L45.138|
00008a  463a              MOV      r2,r7                 ;553
00008c  4641              MOV      r1,r8                 ;553
00008e  4648              MOV      r0,r9                 ;553
000090  f7fffffe          BL       __aeabi_memcpy
000094  bf00              NOP      
000096  e7ce              B        |L45.54|
;;;556    			
                          ENDP


                          AREA ||.data||, DATA, ALIGN=1

                  g_ChipID
000000  4001              DCW      0x4001
                  g_LcdHeight
000002  00f0              DCW      0x00f0
                  g_LcdWidth
000004  0140              DCW      0x0140
                  s_ucBright
000006  00                DCB      0x00
                  g_LcdDirection
000007  00                DCB      0x00

;*** Start embedded assembler ***

#line 1 "..\\User\\bsp\\bsp_tft_lcd.c"
	AREA ||.rev16_text||, CODE
	THUMB
	EXPORT |__asm___13_bsp_tft_lcd_c_g_ChipID____REV16|
#line 388 "..\\Libraries\\CMSIS\\Include\\cmsis_armcc.h"
|__asm___13_bsp_tft_lcd_c_g_ChipID____REV16| PROC
#line 389

 rev16 r0, r0
 bx lr
	ENDP
	AREA ||.revsh_text||, CODE
	THUMB
	EXPORT |__asm___13_bsp_tft_lcd_c_g_ChipID____REVSH|
#line 402
|__asm___13_bsp_tft_lcd_c_g_ChipID____REVSH| PROC
#line 403

 revsh r0, r0
 bx lr
	ENDP
	AREA ||.rrx_text||, CODE
	THUMB
	EXPORT |__asm___13_bsp_tft_lcd_c_g_ChipID____RRX|
#line 587
|__asm___13_bsp_tft_lcd_c_g_ChipID____RRX| PROC
#line 588

 rrx r0, r0
 bx lr
	ENDP

;*** End   embedded assembler ***
